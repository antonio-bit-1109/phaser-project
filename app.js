!function(t){function e(e){for(var i,n,h=e[0],r=e[1],l=e[2],d=0,c=[];d<h.length;d++)n=h[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&c.push(a[n][0]),a[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);for(u&&u(e);c.length;)c.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,h=1;h<s.length;h++){var r=s[h];0!==a[r]&&(i=!1)}i&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var i={},a={0:0},o=[];function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var h=window.webpackJsonp=window.webpackJsonp||[],r=h.push.bind(h);h.push=e,h=h.slice();for(var l=0;l<h.length;l++)e(h[l]);var u=r;o.push([25,1]),s()}({25:function(t,e,s){"use strict";s.r(e);var i=s(15),a=s.n(i);function o(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class n extends Phaser.Scene{constructor(){super("gameplay"),o(this,"DEFAULT_GENERATION_BOMB","default"),o(this,"DOUBLE_GENERATION_BOMB","double"),o(this,"TRIPLE_GENERATION_BOMB","triple"),o(this,"QUADRUPLE_GENERATION_BOMB","quadruple"),o(this,"bombGenerationType",this.DEFAULT_GENERATION_BOMB),o(this,"VELOCITY",250),o(this,"BOMB_DEFAULT_WIDTH",100),o(this,"BOMB_DEFAULT_HEIGHT",100),o(this,"SKYSTRING","assets/bombburner/images/sky.png"),o(this,"TERRAINSTRING","assets/bombburner/images/grass_no_bg.png"),o(this,"gameName",null),o(this,"b",0),o(this,"c",0),o(this,"d",0),o(this,"gameTimer",`${this.b}:${this.c}${this.d}`),o(this,"timerRef",null),o(this,"grassTerrain",null),o(this,"dude",null),o(this,"shooting_dude",null),o(this,"cursors",null),o(this,"explosion",null),o(this,"canvasWidth",null),o(this,"canvasHeight",null),o(this,"hp",100),o(this,"maxHp",100),o(this,"hpBar",null),o(this,"hpBackground",null),o(this,"punteggio",10),o(this,"timer",0),o(this,"punteggioRef",null),o(this,"livello",1),o(this,"livelloRef",null),o(this,"livelloChanged",!1),o(this,"bombsGroup",null),o(this,"timerEventSpawnBomb",null),o(this,"bullet",null),o(this,"explosion_bullet_bomb",null),o(this,"boss",null),o(this,"movingRight",!1),o(this,"hpBackground_boss",null),o(this,"hpBoss_bar",null),o(this,"hpBoss_number",100),o(this,"shuriken_boss",null),o(this,"boss_laserBeam_1",null),o(this,"boss_laserBeam_2",null),o(this,"shuriken_count",0),o(this,"random_x_position_boss",null),o(this,"boss_tweens",null),o(this,"boss_atk_2_done",!1),o(this,"hittedByLaserBeam",!1),o(this,"generatingHpBomb",!1),o(this,"hpBomb_sprite",null),o(this,"alreadyAccessed",!1),o(this,"bossDoingAtk1",!1),o(this,"bossDoingAtk2",!1),o(this,"bossDoingAtk3",!1),o(this,"bossDoingAtk4",!1),o(this,"arrAtks",[this.bossDoingAtk1,this.bossDoingAtk2,this.bossDoingAtk3,this.bossDoingAtk4]),o(this,"bossExecutingAnAttack",!1),o(this,"layer",null),o(this,"timeToBeatBoss",60),o(this,"textTimerBoss",null),o(this,"timerDecrement",null),o(this,"clicking_clock_sound",null),o(this,"thunderTempest",null),o(this,"bossShield",null),o(this,"timerBossShield",null),o(this,"playingThunderStorm",!1),o(this,"attackUp_sprite",null),o(this,"generatingAttackUpSprite",!1),o(this,"caricatoreBullets",null),o(this,"bulletsGroup",null),o(this,"dudePompato",!1),o(this,"removingBullet",!1),o(this,"superBullet",null),o(this,"textSuperBulletRemaining",null),o(this,"dudeCorazzato_sprite",null),o(this,"dudePositionX",null),o(this,"gameMusicRef",null),o(this,"bossMusicRef",null),o(this,"btnHome_Ref",null)}init(t){this.gameName=t.gameName,this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight,this.VELOCITY=250,this.hp=100,this.maxHp=100,this.punteggio=0,this.timer=0,this.livello=0,this.livelloChanged=!1,this.bombGenerationType=this.DEFAULT_GENERATION_BOMB,this.bullet=null,this.hpBoss_number=100,this.boss=null,this.thunderTempest=null,this.bossExecutingAnAttack=!1,this.layer=null,this.timeToBeatBoss=60,this.textTimerBoss=null,this.timerDecrement=null,this.clicking_clock_sound=null,this.thunderTempest=null,this.caricatoreBullets=null,this.textSuperBulletRemaining=null,this.dudePompato=!1,this.removingBullet=!1,this.dudeCorazzato_sprite=null,this.attackUp_sprite=null,this.generatingAttackUpSprite=!1,this.caricatoreBullets=null,this.bulletsGroup=null,this.dudePompato=!1,this.removingBullet=!1,this.superBullet=null,this.textSuperBulletRemaining=null,this.dudePositionX=null,this.gameMusicRef=null,this.bossMusicRef=null,this.b=0,this.c=0,this.d=0}preload(){this.load.image("home_btn","assets/bombburner/images/btn_sfondo.png"),this.load.image("sky",this.SKYSTRING),this.load.image("shield","assets/bombburner/images/shield.png"),this.load.spritesheet("bomb","assets/bombburner/images/bomb_spritesheet.png",{frameWidth:32,frameHeight:32}),this.load.image("grass",this.TERRAINSTRING),this.load.spritesheet("dude","assets/bombburner/images/dude.png",{frameHeight:45,frameWidth:32}),this.load.spritesheet("hpBomb","assets/bombburner/images/lifeBomb.png",{frameWidth:261,frameHeight:264.5}),this.load.spritesheet("dude-shooting","assets/bombburner/images/dude_2.0.png",{frameHeight:204,frameWidth:122}),this.load.spritesheet("explosion","assets/bombburner/images/explosion.png",{frameHeight:115,frameWidth:160}),this.load.spritesheet("bullet_bomb_explosion","assets/bombburner/images/explosion_sprite.png",{frameHeight:145,frameWidth:120}),this.load.audio("expl_sound","assets/bombburner/sounds/expl_sound.mp3"),this.load.audio("gameMusic","assets/bombburner/sounds/gameMusic.mp3"),this.load.audio("expl_bomb_bullet","assets/bombburner/sounds/explosion_bullet_bomb.mp3"),this.load.audio("bossMusic","assets/bombburner/sounds/bossMusic.mp3"),this.load.audio("hpUp","assets/bombburner/sounds/hpUp.mp3"),this.load.audio("dude_damage_1","assets/bombburner/sounds/hurt_1.mp3"),this.load.audio("dude_damage_2","assets/bombburner/sounds/hurt_2.mp3"),this.load.audio("dude_damage_3","assets/bombburner/sounds/hurt_3.mp3"),this.load.audio("dude_damage_4","assets/bombburner/sounds/hurt_4.mp3"),this.load.audio("clicking-clock","assets/bombburner/sounds/clock-timer.mp3"),this.load.audio("thunderstorm","assets/bombburner/sounds/thunderstorm.mp3"),this.load.audio("attackUpSound","assets/bombburner/sounds/attackUpSound.mp3"),this.load.spritesheet("bullet","assets/bombburner/images/bullet_2.png",{frameHeight:151,frameWidth:93}),this.load.spritesheet("dudeCorazzato","assets/bombburner/images/dude_corazzato.png",{frameWidth:43,frameHeight:42}),this.load.spritesheet("bossSpriteSheet","assets/bombburner/images/boss.png",{frameWidth:87,frameHeight:110}),this.load.spritesheet("shuriken_boss","assets/bombburner/images/shuriken_boss.png",{frameWidth:15.5,frameHeight:17}),this.load.spritesheet("layer","assets/bombburner/images/texture_laser.png",{frameWidth:68,frameHeight:422}),this.load.image("laserBeam","assets/bombburner/images/laserBeam.png"),this.load.image("attackUp","assets/bombburner/images/attackUp.png"),this.load.audio("bulletSound","assets/bombburner/sounds/fireBall.mp3"),this.load.audio("bossHitted","assets/bombburner/sounds/bossDefeated.mp3"),this.load.audio("bossDeath","assets/bombburner/sounds/bossIsDeath.mp3"),this.load.audio("superbulletSound","assets/bombburner/sounds/superBulletSound.mp3")}showGameTimer(){this.timerRef=this.add.text(this.canvasWidth/2.2,this.canvasHeight/9,this.gameTimer).setDepth(90).setScale(2).setColor("red")}create(){this.btnHome_Ref=this.add.image(this.canvasWidth/1.1,50,"home_btn").setDepth(3).setScale(.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop("pingpong"),this.scene.start("startmenu")}),this.gameMusicRef=this.sound.add("gameMusic",{loop:!0}),this.gameMusicRef.play(),this.bombsGroup=this.physics.add.group(),this.shuriken_boss=this.physics.add.group(),this.timerEventSpawnBomb=this.time.addEvent({delay:4e3,loop:!0,callback:()=>this.handleBombGeneration()}),this.showPunteggio(),this.showLivello(),this.showGameTimer(),this.cursors=this.input.keyboard.createCursorKeys(),this.add.image(this.canvasWidth/2,this.canvasHeight/2,"sky").setOrigin(.5,.5),this.grassTerrain=this.physics.add.staticSprite(0,this.canvasHeight-80,"grass").setOrigin(0,0).setDepth(0),this.dude=this.physics.add.sprite(this.canvasWidth/2,this.canvasHeight-80,"dude"),this.dude.displayWidth=40,this.dude.displayHeight=60,this.dudePositionX=this.canvasWidth/2,this.dudeCorazzato_sprite=this.physics.add.sprite(this.dude.x,this.dude.y,"dudeCorazzato"),this.dudeCorazzato_sprite.setVisible(!1),this.dudeCorazzato_sprite.setSize(40,60),this.dudeCorazzato_sprite.setDisplaySize(40,60),this.shooting_dude=this.physics.add.sprite(this.dude.body.x,this.dude.body.y,"shooting-dude"),this.shooting_dude.displayWidth=12,this.shooting_dude.displayHeight=12,this.shooting_dude.setVisible(!1),this.loadBombAnimation(),this.createAnimationDude(this),this.createAnimationExplosion(this),this.createAnimationExplosionBulletBomb(),this.createAnimationBossMovements(),this.animateBombHpGain(),this.animateThunderLayer(),this.createAnimationBulletFiring(),this.createAnimationRotationShuriken(),this.createHpbackground(),this.createAnimationDudeCorazzato(),this.hpBar=this.add.graphics(),this.updateHpBar()}layersAttackBoss(){console.log("attacco 3 del boss!"),this.layer||(this.layer=this.physics.add.sprite(Math.floor(Math.random()*this.canvasWidth),0,"layer"),this.layer.setVelocityY(300),this.layer.anims.play("thunderLayer"),this.bossDoingAtk3=!1,this.bossExecutingAnAttack=!1)}chooseAttackRandomly(){let t=Math.floor(Math.random()*this.arrAtks.length);this.arrAtks[t]=!0,console.log(this.arrAtks),this.bossExecutingAnAttack=!0}resetArrAttacks(){this.arrAtks=this.arrAtks.map(()=>!1),console.log(this.arrAtks,"array attacchi post reset")}showTimerBossDefeat(){this.textTimerBoss||(console.log("renderizzo timer boss"),this.textTimerBoss=this.add.text(this.canvasWidth/7,this.canvasHeight/8,`time before annihilation:\n             ${this.timeToBeatBoss}`,{fontSize:"17px",color:"#ffcc00",fontStyle:"bold"}).setOrigin(.5,.5))}startDecrementBossTimer(){this.timerDecrement||(this.timerDecrement=this.time.addEvent({delay:1e3,callback:()=>{this.timeToBeatBoss-=1,this.textTimerBoss.setText(`time before annihilation:\n             ${this.timeToBeatBoss}`)},callbackScope:this,loop:!0}))}activateBossShield(){this.bossShield||(this.bossShield=this.physics.add.image(this.boss.x,this.boss.y,"shield"),this.bossShield.displayWidth=200,this.bossShield.displayHeight=200)}generateAttackUpSprite(){this.attackUp_sprite=this.physics.add.sprite(Math.random()*this.canvasWidth,0,"attackUp"),this.attackUp_sprite.setVelocityY(150)}update(t,e){if(this.updatePunteggio(t),this.updateLivello(),console.log(t),this.punteggio%300!=0||this.generatingHpBomb||0===this.punteggio||(console.log("generazione hp bomb "),this.generatingHpBomb=!0,this.generateHpBomb()),this.punteggio%400!=0||this.generatingAttackUpSprite||(this.generatingAttackUpSprite=!0,this.generateAttackUpSprite()),this.attackUp_sprite&&this.checkCollisionWithGround(this.attackUp_sprite,100)&&(this.attackUp_sprite.destroy(),this.attackUp_sprite=null,this.generatingAttackUpSprite=!1,console.log("attack up sprite ritornato a null")),this.attackUp_sprite&&!this.dudePompato&&this.checkCollision_general(this.dude,this.attackUp_sprite)&&(this.sound.play("attackUpSound"),this.attackUp_sprite.destroy(),this.attackUp_sprite=null,this.generatingAttackUpSprite=!1,this.dudePompato=!0,console.log("dude has taken power up")),this.hpBomb_sprite&&!this.alreadyAccessed&&(this.dude||this.dudeCorazzato_sprite)&&(this.checkCollision_general(this.hpBomb_sprite,this.dude)||this.checkCollision_general(this.hpBomb_sprite,this.dudeCorazzato_sprite))&&(this.alreadyAccessed=!0,this.hpBomb_sprite.setVelocityY(0),this.sound.play("hpUp"),this.hpBomb_sprite.body.setAllowGravity(!1),this.hpBomb_sprite&&this.hpBomb_sprite.anims.play("hpBombTaken").on("animationcomplete",()=>{this.hpBomb_sprite.destroy(),this.hpBomb_sprite=null,this.alreadyAccessed=!1,this.generatingHpBomb=!1}),this.hp<=80?this.hp+=20:console.log("la vita è troppo alta per essere ricaricata: hp dude --\x3e ",this.hp)),this.checkCollisionWithGround(this.hpBomb_sprite,90)&&(this.hpBomb_sprite.destroy(),this.hpBomb_sprite=null,this.generatingHpBomb=!1),this.hp<=0&&this.stopGameAndGameOver(),this.boss&&this.moveBoss(),this.boss&&this.updateBossLife(),this.boss&&(this.showTimerBossDefeat(),this.startDecrementBossTimer(),this.clicking_clock_sound||(this.clicking_clock_sound=this.sound.play("clicking-clock")),!this.bossExecutingAnAttack&&this.chooseAttackRandomly(),!this.arrAtks[0]||this.bossDoingAtk2||this.bossDoingAtk3||this.bossDoingAtk4||(this.bossDoingAtk1=!0,this.bossExecutingAnAttack=!0,Math.floor(this.boss.x)%100==0&&this.shuriken_count<5&&this.shurikenAttackBOss(),this.shuriken_count>=5&&(this.resetArrAttacks(),this.bossDoingAtk1=!1,this.shuriken_count=0,this.bossExecutingAnAttack=!1)),!this.arrAtks[1]||this.bossDoingAtk1||this.bossDoingAtk3||this.bossDoingAtk4||(this.bossDoingAtk2=!0,this.laserBeamAttackBoss()),!this.arrAtks[2]||this.bossDoingAtk1||this.bossDoingAtk2||this.bossDoingAtk4||(this.bossDoingAtk3=!0,this.bossExecutingAnAttack=!0,this.layersAttackBoss()),!this.arrAtks[3]||this.bossDoingAtk1||this.bossDoingAtk2||this.bossDoingAtk3||(this.bossDoingAtk4=!0,this.bossExecutingAnAttack=!0,this.activateBossShield()),this.bossShield&&(this.bossShield.x=this.boss.x,this.bossShield.y=this.boss.y,this.timerBossShield++,this.timerBossShield>=124&&(this.bossShield.destroy(),this.bossShield=null,this.timerBossShield=0,this.bossExecutingAnAttack=!1,this.bossDoingAtk4=!1,this.resetArrAttacks())),this.timeToBeatBoss<=0&&!this.thunderTempest)){this.thunderTempest=this.add.group();for(let t=0;t<100;t++){const t=this.physics.add.sprite(Math.floor(Math.random()*this.canvasWidth),0,"layer");this.thunderTempest.add(t),t.setVelocityY(300),t.anims.play("thunderLayer")}}if(null===this.thunderTempest||this.playingThunderStorm||(this.sound.play("thunderstorm"),this.playingThunderStorm=!0),this.thunderTempest&&this.thunderTempest.children.iterate(t=>{this.checkCollision_general(this.dude,t)&&(this.hp-=10),this.dudeCorazzato_sprite&&this.checkCollision_general(this.dudeCorazzato_sprite,t)&&(this.hp-=5)}),this.bombsGroup&&this.bombsGroup.children.iterate(t=>{if(t)return this.bullet&&this.checkCollision_general(t,this.bullet)?(t.destroy(),this.sound.play("expl_bomb_bullet",{volume:5}),this.punteggio+=10,this.explosion_bullet_bomb=this.physics.add.sprite(t.x,t.y,"bullet_bomb_explosion"),this.explosion_bullet_bomb.setGravity(!1),this.explosion_bullet_bomb.anims.play("boom2"),this.bullet.destroy(),this.bullet=null,void this.explosion_bullet_bomb.on("animationcomplete",()=>{this.explosion_bullet_bomb.destroy()})):this.superBullet&&this.checkCollision_general(t,this.superBullet)?(t.destroy(),this.sound.play("expl_bomb_bullet",{volume:5}),this.punteggio+=10,this.explosion_bullet_bomb=this.physics.add.sprite(t.x,t.y,"bullet_bomb_explosion"),this.explosion_bullet_bomb.setGravity(!1),this.explosion_bullet_bomb.anims.play("boom2"),this.explosion_bullet_bomb.on("animationcomplete",()=>{this.explosion_bullet_bomb.destroy()}),void(this.removingBullet=!1)):void(this.checkCollisionWithGround(t,60)&&(this.explosion=this.physics.add.sprite(t.x,t.y-20,"explosion"),this.explosion.anims.play("boom"),this.sound.play("expl_sound"),t.destroy(),this.handle_Dude_Explosion_overlap(),this.explosion.on("animationcomplete",()=>{this.explosion.destroy()})))}),this.dudePompato&&(!this.caricatoreBullets||0===this.caricatoreBullets.getLength())){this.caricatoreBullets||(this.caricatoreBullets=this.physics.add.group());for(let t=0;t<5;t++){const t=this.physics.add.sprite(this.dude.x,this.dude.y-40,"bullet").setAngle(180).setScale(.5).setOrigin(.5).setBounce(1).setVisible(!1).setTint(16711935,16776960,255,16711680);this.caricatoreBullets.add(t)}console.log("caricatore bullet dude pompato:",this.caricatoreBullets),this.textSuperBulletRemaining?this.textSuperBulletRemaining.setText(`Superbullets: ${this.caricatoreBullets.getLength()} `):this.textSuperBulletRemaining=this.add.text(this.canvasWidth/17,this.canvasHeight/6,`Superbullets: ${this.caricatoreBullets.getLength()} `)}if(this.shuriken_boss&&this.shuriken_boss.children.iterate(t=>{this.checkCollision_general(t,this.dude)&&(this.hp-=10,t.destroy(),this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2})),this.dudeCorazzato_sprite&&this.checkCollision_general(t,this.dudeCorazzato_sprite)&&(this.hp-=10,t.destroy(),this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2}))}),this.shuriken_boss&&this.shuriken_boss.children.iterate(t=>{this.checkCollisionWithGround(t,100)&&(console.log("shuriken tocca terra brasato."),t.destroy())}),this.layer&&this.dude&&this.checkCollision_general(this.layer,this.dude)&&(this.hp-=2),this.layer&&this.dudeCorazzato_sprite&&this.checkCollision_general(this.layer,this.dudeCorazzato_sprite)&&(this.hp-=1),this.bullet&&(this.dude||this.dudeCorazzato_sprite)&&(this.checkCollision_general(this.bullet,this.dude)||this.checkCollision_general(this.bullet,this.dudeCorazzato_sprite))&&(this.hp-=10,this.bullet.destroy(),this.bullet=null,this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2})),this.superBullet&&(this.dude||this.dudeCorazzato_sprite)&&(this.checkCollision_general(this.superBullet,this.dudeCorazzato_sprite)||this.checkCollision_general(this.superBullet,this.dude))&&(this.hp-=18,this.superBullet.destroy(),this.superBullet=null,this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2}),this.removingBullet=!1),this.layer&&this.layer.y>this.canvasHeight&&(console.log("il layer è uscito dalla canvas"),this.layer.destroy(),this.layer=null),this.dude&&this.boss_laserBeam_1&&this.boss_laserBeam_2&&!this.hittedByLaserBeam&&(this.checkCollision_general(this.dude,this.boss_laserBeam_1)||this.checkCollision_general(this.dude,this.boss_laserBeam_2))&&(this.hp-=30,this.hittedByLaserBeam=!0,this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2}),console.log("dude preso da uno dei laser beam del boss")),this.dudeCorazzato_sprite&&this.boss_laserBeam_1&&this.boss_laserBeam_2&&!this.hittedByLaserBeam&&(this.checkCollision_general(this.dudeCorazzato_sprite,this.boss_laserBeam_1)||this.checkCollision_general(this.dudeCorazzato_sprite,this.boss_laserBeam_2))&&(this.hp-=20,this.hittedByLaserBeam=!0,this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2}),console.log("dude preso da uno dei laser beam del boss")),this.hittedByLaserBeam&&this.time.delayedCall(2e3,()=>{this.hittedByLaserBeam=!1}),this.bullet&&this.boss&&this.checkCollision_general(this.bullet,this.boss)&&(this.hpBoss_number-=10,this.hpBoss_number>0&&this.sound.play("bossHitted"),this.bullet.destroy(),this.bullet=null),this.superBullet&&this.boss&&this.checkCollision_general(this.superBullet,this.boss)&&(this.hpBoss_number-=15,this.hpBoss_number>0&&this.sound.play("bossHitted"),this.superBullet.destroy(),this.superBullet=null,this.removingBullet=!1),this.boss&&this.hpBoss_number<=0&&(this.sound.play("bossDeath",{volume:3}),this.hpBoss_number=0,this.updateBossLife(),this.boss.destroy(),this.boss=null,this.time.delayedCall(3e3,()=>{this.scene.stop("gameplay"),this.sound.stopAll(),this.scene.start("gameover",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName,sceneName:this.scene.key,punteggioFinale:this.punteggio,livello:this.livello,isGameVictory:!0,isDudePompato:this.dudePompato,gameTime:this.gameTimer})})),this.dude.setVelocity(0),this.dudeCorazzato_sprite&&this.dudeCorazzato_sprite.setVelocity(0),this.cursors.left.isDown){if(!this.dudePompato){if(this.dude&&this.dude.x<=20)return;this.showSprite(this.dude),this.hideSprite(this.dudeCorazzato_sprite),this.hideSprite(this.shooting_dude),this.dude.anims.play("left",!0),this.dude.setVelocityX(-300),this.dudePositionX=this.dude.x}if(this.dudePompato&&this.dudeCorazzato_sprite){if(this.dudeCorazzato_sprite&&this.dudeCorazzato_sprite.x<=20)return;this.hideSprite(this.dude),this.hideSprite(this.shooting_dude),this.showSprite(this.dudeCorazzato_sprite),this.dudeCorazzato_sprite.setVelocityX(-300),this.dudeCorazzato_sprite.anims.play("goLeft",!0),this.dudePositionX=this.dudeCorazzato_sprite.x}}if(this.cursors.right.isDown){if(!this.dudePompato){if(this.dude&&this.dude.x>=this.canvasWidth-30)return;this.showSprite(this.dude),this.hideSprite(this.shooting_dude),this.dude.setVelocityX(300),this.dudePositionX=this.dude.x,this.dude.anims.play("right",!0)}if(this.dudePompato){if(this.dudeCorazzato_sprite&&this.dudeCorazzato_sprite&&this.dudeCorazzato_sprite.x>=this.canvasWidth-30)return;this.hideSprite(this.dude),this.hideSprite(this.shooting_dude),this.showSprite(this.dudeCorazzato_sprite),this.dudeCorazzato_sprite.setVelocityX(300),this.dudePositionX=this.dudeCorazzato_sprite.x,this.dudeCorazzato_sprite.anims.play("goRight",!0)}}if(this.cursors.up.isDown){if(this.cursors.right.isDown)return;if(this.cursors.left.isDown)return;if(this.dudePompato&&this.caricatoreBullets&&this.caricatoreBullets.getLength()>0&&!this.removingBullet){this.hideSprite(this.dude),this.hideSprite(this.shooting_dude),this.showSprite(this.dudeCorazzato_sprite),this.dudeCorazzato_sprite.anims.play("spara_corazzato"),this.dudeCorazzato_sprite.setVelocityX(0),this.removingBullet=!0;const t=this.caricatoreBullets.getLast(!0);t.setVelocityY(-500),t.setVisible(!0),t.anims.play("flameBullet"),this.sound.play("superbulletSound",{volume:1}),t.body.x=this.dudeCorazzato_sprite.x-30,t.body.y=this.dudeCorazzato_sprite.y-120,this.caricatoreBullets.remove(t),this.superBullet=t,console.log("caricatore bullets rimasti dovrebbe essere x - 1 ",this.caricatoreBullets),this.textSuperBulletRemaining.setText(`Superbullets: ${this.caricatoreBullets.getLength()}`)}else if(null===this.bullet&&!this.dudePompato&&!this.superBullet){this.bullet=this.physics.add.sprite(this.dude.x,this.dude.y-40,"bullet").setAngle(180).setScale(.3).setOrigin(.5).setBounce(1);const t=this.bullet.displayWidth,e=this.bullet.displayHeight;this.bullet.body.setSize(t,e),this.bullet.body.setOffset((this.bullet.width-t)/2,(this.bullet.height-e)/2),this.bullet.setVelocity(0,-250),this.sound.play("bulletSound"),this.bullet.anims.play("flameBullet"),this.hideSprite(this.dudeCorazzato_sprite),this.hideSprite(this.dude),this.showSprite(this.shooting_dude),this.shooting_dude.x=this.dudePositionX,this.shooting_dude.y=this.dude.y-9,this.shooting_dude.anims.play("shoot",!0)}}this.cursors.right.isDown||this.cursors.left.isDown||this.cursors.up.isDown||this.dudePompato||(this.showSprite(this.dude),this.hideSprite(this.dudeCorazzato_sprite),this.hideSprite(this.shooting_dude),this.dude.x=this.dudePositionX,this.dude.anims.play("stand")),this.cursors.right.isDown||this.cursors.left.isDown||this.cursors.up.isDown||!this.dudePompato||(this.hideSprite(this.dude),this.showSprite(this.dudeCorazzato_sprite),this.hideSprite(this.shooting_dude),this.dudeCorazzato_sprite.displayWidth=100,this.dudeCorazzato_sprite.displayHeigth=250,this.dudeCorazzato_sprite.anims.play("standCorazzato"),this.dudeCorazzato_sprite.x=this.dudePositionX),this.bullet&&this.bossShield&&this.checkCollision_general(this.bullet,this.bossShield)&&(this.bullet.setVelocityY(400),this.bullet.setAngle(360)),this.superBullet&&this.bossShield&&this.checkCollision_general(this.superBullet,this.bossShield)&&(this.superBullet.setVelocityY(600),this.superBullet.setAngle(360)),this.updateHpBar(),this.bullet&&this.checkIfBulletOutOfCanvas(),this.superBullet&&this.checkIfSuperBulletOutOfCanvas(),this.caricatoreBullets&&null!==this.caricatoreBullets.getLength()&&0===this.caricatoreBullets.getLength()&&this.dudePompato&&(console.log("dude non più pompato"),this.dudePompato=!1),console.log("dude è pompato??? ---\x3e ",this.dudePompato)}hideSprite(t){t.setVisible(!1),t.body.enable=!1}showSprite(t){t.setVisible(!0),t.body.enable=!0}generateHpBomb(){this.hpBomb_sprite=this.physics.add.sprite(Math.random()*this.canvasWidth,0,"hpBomb"),this.hpBomb_sprite.anims.play("hpBombFall"),this.hpBomb_sprite.setVelocityY(350),this.hpBomb_sprite.setScale(.3)}showLivello(){this.livelloRef=this.add.text(this.canvasWidth/2,this.canvasHeight/11,`Livello: ${this.livello} `,{fontSize:"20px",color:"#ff0000",fontStyle:"bold"}).setOrigin(.5,.5).setDepth(6)}createHpbackground(){this.hpBackground=this.add.graphics(),this.hpBackground.fillStyle(16711680,1),this.hpBackground.fillRect(20,20,200,20)}checkIfBulletOutOfCanvas(){(this.bullet&&this.bullet.body.y<=0||this.bullet.body.y>=this.canvasHeight)&&(this.bullet=null,console.log("bullet uscita dall asse y "))}checkIfSuperBulletOutOfCanvas(){(this.superBullet&&this.superBullet.body.y<=0||this.superBullet.body.y>=this.canvasHeight)&&(this.superBullet=null,console.log(" super bullet uscita dall asse y "),this.removingBullet=!1,console.log("removing bullet false, posso sparare di nuovo: colpi superbullet residui: "+this.caricatoreBullets.getLength()))}chooseRandomDudeDamageSound(){const t=["dude_damage_1","dude_damage_2","dude_damage_3","dude_damage_4"];return t[Math.floor(Math.random()*t.length)]}checkCollision_general(t,e){if(t&&e&&this.physics.overlap(t,e))return!0}moveBoss(){this.boss_atk_2_done&&(this.boss_atk_2_done=!1,this.boss.setVelocityX(0),this.boss.x>this.canvasWidth/2?(this.movingRight=!1,this.boss.setVelocityX(-150)):(this.boss.setVelocityX(150),this.movingRight=!0)),this.boss.x>=0&&this.movingRight&&this.boss.setVelocityX(150),this.boss.x>=this.canvasWidth-100&&(this.boss.setVelocityX(-150),this.movingRight=!1),this.boss.x<=100&&(this.movingRight=!0)}laserBeamAttackBoss(){if(null===this.random_x_position_boss){const t=[200,300,400,500,600,700,800,900],e=Phaser.Actions.Shuffle(t);this.random_x_position_boss=e[0]}this.boss_tweens||(this.boss_tweens=this.tweens.add({targets:this.boss,x:this.random_x_position_boss,duration:1e3,ease:"Power2",onComplete:()=>{this.fireLaserBeam(),this.boss_laserBeam_1&&this.boss_laserBeam_2&&this.time.delayedCall(1e3,()=>{this.boss_laserBeam_1.destroy(),this.boss_laserBeam_2.destroy(),this.boss_tweens=null,this.bossDoingAtk2=!1,console.log("Laser beam disattivato!")}),this.random_x_position_boss=null,this.bossExecutingAnAttack=!1,this.resetArrAttacks()}}))}fireLaserBeam(){console.log("Boss arrivato alla posizione!");const t=this.canvasHeight-(this.boss?this.boss.y:0);this.boss_laserBeam_1=this.add.rectangle(this.boss.x-40,this.boss.y+t/2,10,t,16711680,.8),this.boss_laserBeam_2=this.add.rectangle(this.boss.x+30,this.boss.y+t/2,10,t,16711680,.8),this.physics.add.existing(this.boss_laserBeam_1),this.physics.add.existing(this.boss_laserBeam_2)}shurikenAttackBOss(){const t=this.physics.add.sprite(this.boss.x,this.boss.y,"shuriken_boss").setScale(2);this.shuriken_boss.add(t),t.setVelocityY(this.VELOCITY+=10),t.body.allowGravity=!1,t.anims.play("shuriken"),this.shuriken_count++,console.log(t.body.velocity)}stopGameAndGameOver(){this.scene.stop("gameplay"),this.bombsGroup=null,this.timerEventSpawnBomb=null,this.sound.stopAll(),this.scene.start("gameover",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,punteggioFinale:this.punteggio,livello:this.livello,isGameVictory:!1,isDudePompato:this.dudePompato,gameTime:this.gameTimer,gameName:this.gameName,sceneName:this.scene.key})}showPunteggio(){this.punteggioRef=this.add.text(this.canvasWidth/1.3,this.canvasHeight/11,`punteggio: ${this.punteggio} `,{fontSize:"30px",color:"#ff0000",fontStyle:"bold"}).setOrigin(.5,.5).setDepth(6)}handleBombGeneration(){switch(this.bombGenerationType){case this.DEFAULT_GENERATION_BOMB:this.singleBombGen();break;case this.DOUBLE_GENERATION_BOMB:this.multipleBombGen(2);break;case this.TRIPLE_GENERATION_BOMB:this.multipleBombGen(3);break;case this.QUADRUPLE_GENERATION_BOMB:this.multipleBombGen(4)}}createBomb(){return this.bombsGroup.create(Math.random()*this.canvasWidth,0,"bomb")}singleBombGen(){const t=this.createBomb();t.setDisplaySize(this.BOMB_DEFAULT_WIDTH,this.BOMB_DEFAULT_HEIGHT),t.setVelocityY(this.VELOCITY),t.setGravityY(10),t.setBounce(0),t.anims.play("bombAnim")}multipleBombGen(t){for(let e=0;e<t;e++){const t=this.createBomb();t.setDisplaySize(this.BOMB_DEFAULT_WIDTH,this.BOMB_DEFAULT_HEIGHT),t.setVelocityY(this.VELOCITY),t.setGravityY(10),t.setBounce(0),t.anims.play("bombAnim")}}checkCollisionWithGround(t,e){if(t&&t.body&&Math.round(t.body.y)>Math.round(this.grassTerrain.body.y+e))return!0}updateLivello(){this.livelloChanged||this.punteggio%200!=0||this.boss||(this.livelloChanged=!0,this.livello++,this.livelloRef.setText(`Livello: ${this.livello}`),this.time.delayedCall(1e3,()=>{this.livelloChanged=!1}),1e3!==this.timerEventSpawnBomb.delay&&(this.timerEventSpawnBomb.delay-=1e3,console.log("timer spwan bomba diminuito",this.timerEventSpawnBomb.delay)),2===this.livello&&(this.bombGenerationType=this.DOUBLE_GENERATION_BOMB,console.log("passato a modalità spawn bombe doppio")),3===this.livello&&(this.bombGenerationType=this.TRIPLE_GENERATION_BOMB,console.log("passato alla modalità spawn bombe triplo")),4===this.livello&&(this.bombGenerationType=this.QUADRUPLE_GENERATION_BOMB,console.log("passato alla modalità spawn bombe quadruplo")),6===this.livello&&(this.timerEventSpawnBomb.paused=!0,this.tweens.add({targets:this.sound.get("gameMusic"),volume:0,duration:2e3,ease:"Linear",onComplete:()=>{this.sound.get("gameMusic").stop()}}),this.bossMusicRef=this.sound.add("bossMusic"),this.bossMusicRef.play(),this.generateBoss()))}generateBoss(){this.boss=this.physics.add.sprite(this.canvasWidth/8,this.canvasHeight/6,"bossSpriteSheet"),this.createBossHp_Background(),this.boss.anims.play("bossAnim"),this.movingRight=!0,this.hpBoss_bar=this.add.graphics()}createBossHp_Background(){this.hpBackground_boss=this.add.graphics(),this.hpBackground_boss.fillStyle(8421504,1),this.hpBackground_boss.fillRect(this.canvasWidth-250,20,200,20)}updateBossLife(){this.hpBoss_bar.clear();const t=this.hpBoss_number/this.maxHp;this.hpBoss_bar.fillStyle(8388736,1),this.hpBoss_bar.fillRect(this.canvasWidth-250,20,200*t,20)}updatePunteggio(t){const e=Math.floor(t/1e3);0!==this.timer&&this.timer!==e&&(this.punteggio+=10),this.timer!==e&&this.updateGameTimer(),this.timer=e,this.punteggioRef&&this.punteggioRef.setText(`Punteggio: ${this.punteggio}`)}updateGameTimer(){return 9===this.d?(this.c++,this.d=0,void this.refreshTime()):5===this.c?(this.b++,this.c=0,this.d=0,void this.refreshTime()):(this.d++,this.refreshTime(),void console.log(this.gameTimer))}refreshTime(){this.gameTimer=`${this.b}:${this.c}${this.d}`,this.timerRef.setText(this.gameTimer)}updateHpBar(){this.hpBar.clear();const t=this.hp/this.maxHp;this.hpBar.fillStyle(65280,1),this.hpBar.fillRect(20,20,200*t,20)}handle_Dude_Explosion_overlap(){this.dude&&this.explosion&&this.physics.overlap(this.dude,this.explosion)&&(this.hp-=20,this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2}),this.updateHpBar()),this.dudeCorazzato_sprite&&this.explosion&&this.physics.overlap(this.dudeCorazzato_sprite,this.explosion)&&(this.hp-=20,this.sound.play(this.chooseRandomDudeDamageSound(),{volume:2}),this.updateHpBar())}createAnimationExplosionBulletBomb(){this.anims.create({key:"boom2",frames:this.anims.generateFrameNumbers("bullet_bomb_explosion",{start:0,end:7}),frameRate:15,repeat:0})}createAnimationBossMovements(){this.anims.create({key:"bossAnim",frames:this.anims.generateFrameNumbers("bossSpriteSheet",{start:0,end:7}),frameRate:20,repeat:-1})}createAnimationExplosion(){this.anims.create({key:"boom",frames:this.anims.generateFrameNumbers("explosion",{start:0,end:24}),frameRate:30,repeat:0})}createAnimationDude(){this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("dude",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"stand",frames:[{key:"dude",frame:4}],frameRate:20,repeat:-1}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("dude",{start:5,end:8}),frameRate:10,repeat:-1}),this.anims.create({key:"shoot",frames:[{key:"dude-shooting",frame:4}],frameRate:20,repeat:0})}createAnimationRotationShuriken(){this.anims.create({key:"shuriken",frames:this.anims.generateFrameNumbers("shuriken_boss",{start:0,end:1}),frameRate:8,repeat:-1})}createAnimationBulletFiring(){this.anims.create({key:"flameBullet",frames:this.anims.generateFrameNumbers("bullet",{start:0,end:4}),frameRate:15,repeat:-1})}loadBombAnimation(){this.anims.create({key:"bombAnim",frames:this.anims.generateFrameNumbers("bomb",{start:0,end:2}),frameRate:15,repeat:-1})}animateBombHpGain(){this.anims.create({key:"hpBombFall",frames:this.anims.generateFrameNumbers("hpBomb",{start:0,end:0}),frameRate:15,repeat:-1}),this.anims.create({key:"hpBombTaken",frames:this.anims.generateFrameNumbers("hpBomb",{start:4,end:11}),frameRate:10,repeat:0}),this.anims.create({key:"hpBombFallenGround",frames:this.anims.generateFrameNumbers("hpBomb",{start:7,end:11}),frameRate:15,repeat:-1})}animateThunderLayer(){this.anims.create({key:"thunderLayer",frames:this.anims.generateFrameNumbers("layer",{start:0,end:3}),frameRate:15,repeat:-1})}createAnimationDudeCorazzato(){this.anims.create({key:"standCorazzato",frames:this.anims.generateFrameNumbers("dudeCorazzato",{start:0,end:0}),frameRate:15,repeat:-1}),this.anims.create({key:"goRight",frames:this.anims.generateFrameNumbers("dudeCorazzato",{start:3,end:8}),frameRate:15,repeat:-1}),this.anims.create({key:"goLeft",frames:this.anims.generateFrameNumbers("dudeCorazzato",{start:9,end:14}),frameRate:15,repeat:-1}),this.anims.create({key:"spara_corazzato",frames:this.anims.generateFrameNumbers("dudeCorazzato",{start:18,end:18}),frameRate:15,repeat:-1})}}function h(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const r={fontSize:"30px",color:"#1e1e1b",fontStyle:"bold",fontFamily:"verdana"};class l extends Phaser.Scene{constructor(){super("startmenu"),h(this,"title","Bomb burner"),h(this,"canvasMenu",null),h(this,"canvasWidth",null),h(this,"canvasHeight",null),h(this,"startGameRef",null),h(this,"mezzoBusto1",null),h(this,"mezzoBusto_boss",null),h(this,"introMusicAuthor","Menù music made by Fassounds - play time"),h(this,"bombBurnerGameName","Bomb Burner"),h(this,"pingPongGameName","Ping pong dude"),h(this,"circleOfDeathName","Circle of Death"),h(this,"pigsName","Maiale (pig)"),h(this,"r0","In this game your aim is to reach 100pts rolling 2 dices at a time. \n You can roll dices as many times as you want. \n You keep store points for each throw you make as long as you DONT roll a 1,if so you are going to lose all the points \n you have accumulated and is it now turn for your opponent to play. \n During your turn you can decide to roll dices or pass the hand to your opponent. \n first one reach 100pts wins the game. \n use the mouse to click around. \n\n\n 'Grazie al Fabione per lo spunto su questo giochino!' ;) \n "),h(this,"r1","In this game you have to survive to all bombs. \nYou can avoid them or destroy them, but be sure to reach the final boss. \nThan you have to defeat him of course. \n Will you be strong enough to survive? \nbe careful, you can only fire one bullet at a time. \n Arrows LEFT and RIGHT to move, UP to shoot."),h(this,"r2","You can only move in circle, you can't fire, \n just survive until the timer runs out. \nArrows LEFT and RIGHT to move your dude \n SPACE to accelerate (keep an eye on your tank on the left while sprinting) ."),h(this,"r3","Just like pong. \n Move using UP and DOWN arrow keys.")}convertToRadiant(t){return Phaser.Math.DegToRad(t)}init(t){this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight}preload(){this.load.image("menuCanvas","assets/bombburner/images/canvasMenu.png"),this.load.audio("bg_music","assets/bombburner/sounds/bg_music.mp3"),this.load.image("mezzoBustoDude","assets/bombburner/images/mezzoBustoDude.png"),this.load.image("boss_silly","assets/bombburner/images/boss_silly.png")}create(){this.add.text(this.canvasWidth/2,this.canvasHeight-100,this.introMusicAuthor).setDepth(6).setOrigin(.5,.5),this.sound.play("bg_music",{volume:1,loop:!0}),this.canvasMenu=this.add.image(this.canvasWidth/2,this.canvasHeight/2,"menuCanvas").setScale(1.3,1.3).setDepth(5),this.add.text(this.canvasWidth/2,this.canvasHeight/5,this.title.toUpperCase(),{fontSize:"50px",color:"#1e1e1b",fontStyle:"bold",fontFamily:"verdana"}).setDepth(6).setOrigin(.5,.5),this.startGameRef=this.add.text(this.canvasWidth/2,this.canvasHeight/3,this.bombBurnerGameName,r).setDepth(6).setOrigin(.5,.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop("startmenu"),this.scene.start("generalgamerules",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.bombBurnerGameName,r0:this.r1,gameToStart:"gameplay"})}),this.add.text(this.canvasWidth/2,this.canvasHeight/2.5,this.pingPongGameName,r).setDepth(6).setOrigin(.5,.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop("startmenu"),this.scene.start("generalgamerules",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.pingPongGameName,r0:this.r3,gameToStart:"choosepongdifficulty"})}),this.add.text(this.canvasWidth/2,this.canvasHeight/2.1,this.circleOfDeathName,r).setDepth(6).setOrigin(.5,.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop("startmenu"),this.scene.start("generalgamerules",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.circleOfDeathName,r0:this.r2,gameToStart:"circleofdeath"})}),this.add.text(this.canvasWidth/2,this.canvasHeight/1.8,this.pigsName,r).setDepth(6).setOrigin(.5,.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop("startmenu"),this.scene.start("generalgamerules",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.pigsName,r0:this.r0,gameToStart:"pigs"})}),this.add.text(this.canvasWidth/2,this.canvasHeight/1.6,"Classifica Punteggi",{fontSize:"30px",color:"#1e1e1b",fontStyle:"bold",fontFamily:"verdana"}).setDepth(6).setOrigin(.5,.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop("startmenu"),this.scene.start("displayallscores",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight})}),this.mezzoBusto1=this.physics.add.image(this.canvasMenu.x+this.canvasMenu.displayWidth/4,this.canvasHeight/3.5,"mezzoBustoDude").setDepth(4).setScale(.5).setOrigin(.5,.5).setRotation(this.convertToRadiant(90)),this.mezzoBusto_boss=this.physics.add.image(100,this.canvasHeight+100,"boss_silly").setDepth(10).setScale(.5).setOrigin(.5,.5),this.moveMezzoBusto(this.mezzoBusto1),this.moveMezzoBustoStraigth(this.mezzoBusto_boss)}update(t,e){}moveMezzoBustoStraigth(t){this.tweens.chain({targets:t,loop:-1,tweens:[{duration:1500,y:this.canvasHeight-100},{duration:1500,y:this.canvasHeight+100},{x:this.canvasWidth/2},{duration:1500,y:this.canvasHeight-100},{duration:1500,y:this.canvasHeight+100},{x:this.canvasWidth-100},{duration:1500,y:this.canvasHeight-100},{y:this.canvasHeight+100},{duration:5e3,x:this.canvasWidth/2,y:this.canvasHeight-100},{duration:5e3,x:100,y:this.canvasHeight+100}]})}moveMezzoBusto(t){this.tweens.chain({targets:t,loop:-1,tweens:[{angle:90,duration:1e3,ease:"Linear",x:t.x+250},{duration:1e3,ease:"Linear",x:t.x-200},{duration:1e3,ease:"Linear",y:t.y+230,angle:0},{duration:1e3,ease:"Linear",x:t.x-600},{duration:2e3,ease:"Linear",x:t.x+250},{duration:1e3,ease:"Linear",x:t.x-250},{angle:-90,y:t.y},{duration:1e3,x:100},{duration:3e3,x:200},{duration:1e3,x:400},{duration:10,angle:90}]})}}function u(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const d=2493956;class c extends a.a.Scene{constructor(){super("savescore"),u(this,"punteggioFinale",null),u(this,"livelloRaggiunto",null),u(this,"tempoDiGioco",null),u(this,"canvasWidth",null),u(this,"canvasHeight",null),u(this,"uniqueVal",Math.floor(9999999999*Math.random())),u(this,"gameName",null)}init(t){this.punteggioFinale=t.punteggioFinale,this.livelloRaggiunto=t.livello,this.tempoDiGioco=t.tempoGioco,this.canvasHeight=t.canvasHeight,this.canvasWidth=t.canvasWidth,this.gameName=t.gameName}preload(){}checkIfNotNull(t){return t||"Non disponibile"}create(){console.log(this.canvasWidth,this.canvasHeight);var t=this.add.text(0,0,"").setDepth(1),e={val:{punteggioFinale:this.checkIfNotNull(this.punteggioFinale),tempoDiGioco:this.checkIfNotNull(this.tempoDiGioco),livelloRaggiunto:this.checkIfNotNull(this.livelloRaggiunto),uniqueVal:this.checkIfNotNull(this.uniqueVal),gameName:this.checkIfNotNull(this.gameName)},x:this.canvasWidth/2,y:this.canvasHeight/2,space:{left:20,right:20,top:20,bottom:20,item:20,firstName:20},background:{strokeColor:8085079,strokeWidth:4,radius:10},title:{text:{fontSize:24}},nameInput:{width:150,background:{color:d,"focus.color":5125166},style:{backgroundBottomY:4,backgroundHeight:18,"cursor.color":"black","cursor.backgroundColor":"white"}},button:{space:{left:5,right:5,top:5,bottom:5},background:{color:d,radius:5,"hover.strokeColor":16777215},text:{fontSize:20}}};this.rexUI.add.nameInputDialog(e).resetDisplayContent({title:"My name is...",button:"OK",firstName:"First Name",lastName:"Last Name"}).layout().modalPromise().then(function(s){const i=new Date,a=i.toLocaleDateString("it-IT"),o=i.getHours(),n=i.getMinutes();t.text=`                GAMENAME: ${e.val.gameName}    \n                FIRSTNAME: ${s.firstName}\n                LASTNAME: ${s.lastName}\n                LEVEL: ${e.val.livelloRaggiunto}\n                FINAL SCORE: ${e.val.punteggioFinale}\n                TIME: ${e.val.tempoDiGioco}\n                DATE: ${a+" "+o+":"+n}\n                --------------------------------------------------------------------\n                `,localStorage.setItem(` PHASER-${e.val.gameName}-${s.firstName} ${s.lastName}-${e.val.uniqueVal}`,`GAMENAME: ${e.val.gameName} , FIRSTNAME: ${s.firstName} , LASTNAME: ${s.lastName} , LEVEL: ${e.val.livelloRaggiunto} , FINAL SCORE: ${e.val.punteggioFinale} , TIME: ${e.val.tempoDiGioco} , DATE: ${a+" "+o+":"+n}`)}).then(()=>{this.time.delayedCall(3e3,()=>{this.scene.stop("savescore"),this.scene.start("startmenu",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight})})})}update(){}}var p=s(23);function g(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const m=8085079,b=2493956;class v extends Phaser.Scene{constructor(){super("displayallscores"),g(this,"canvasWidth",null),g(this,"canvasHeight",null)}init(t){this.canvasHeight=t.canvasHeight,this.canvasWidth=t.canvasWidth}preload(){}create(){const t=function(){const t=new Map;for(let e=0;e<localStorage.length;e++){const s=localStorage.key(e),i=localStorage.getItem(s);s.startsWith(" PHASER-")&&t.set(s,i)}let e="";if(t.forEach((t,s)=>{e+=`${t.concat("\n ------------------------------------------ ")} \n`}),""===e)return e="Nessun salvataggio presente.",e;return e.replaceAll(",","\n")}();f(this,t,this.canvasWidth/2,this.canvasHeight/2).layout().modalPromise().then(()=>{this.scene.stop("displayallscores"),this.scene.start("startmenu")})}update(t,e){}}var f=function(t,e,s,i){return t.rexUI.add.textArea({x:s,y:i,width:2*s,height:2*i,background:t.rexUI.add.roundRectangle({color:5125166,radius:20}),text:t.rexUI.add.BBCodeText(),slider:{track:t.rexUI.add.roundRectangle(0,0,20,10,10,b),thumb:t.rexUI.add.roundRectangle(0,0,0,0,13,m)},space:{left:20,right:20,top:20,bottom:20,text:10,header:20,footer:20},scroller:{},mouseWheelScroller:{focus:!1,speed:.1},header:t.rexUI.add.label({space:{left:400,right:400,top:10,bottom:10},orientation:0,background:t.rexUI.add.roundRectangle(0,0,20,20,0,b),text:t.add.text(s,i,"CLASSIFICA")}),footer:t.rexUI.add.label({space:{left:10,right:10,top:10,bottom:10},orientation:0,background:t.rexUI.add.roundRectangle({radius:10,color:b,strokeColor:m}),text:t.add.text(0,0,"Close")}).onClick(function(t,e,s,i){e.getTopmostSizer().modalClose()}),content:e,expand:{footer:!1}})};function y(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class _ extends Phaser.Scene{constructor(){super("pingpong"),y(this,"BALLVELOCITY",300),y(this,"GAMEDIFFICULTY",null),y(this,"MAX_BALL_SPEED",600),y(this,"canvasWidth",null),y(this,"canvasHeight",null),y(this,"gameName",null),y(this,"bg",null),y(this,"dudeShip",null),y(this,"bossShip",null),y(this,"ball",null),y(this,"cursor",null),y(this,"ballSpin",null),y(this,"isFirstStart",!0),y(this,"dudePoints_Ref",null),y(this,"bossPoints_Ref",null),y(this,"dudePoints","0"),y(this,"bossPoints","0"),y(this,"scoreLine0",null),y(this,"scoreLine1",null),y(this,"bossInterceptingBall",!1),y(this,"btnHome_Ref",null),y(this,"resetball_btn_ref",null),y(this,"difficultyParams",{tweenDuration:{easy:500,medium:400,hard:300},yVariation:{easy:.5,medium:.7,hard:1},incrementV:{easy:1,medium:1.05,hard:1.1}}),y(this,"isBorderDownReached",!1),y(this,"isBorderUpReached",!1),y(this,"soundsMap",new Map),y(this,"isBallTouchingScoreline",!1),y(this,"fogMode",!1),y(this,"countFog",0)}init(t){this.fogMode=!1,this.countFog=0,this.dudePoints="0",this.bossPoints="0",this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight,this.gameName=t.gameName,this.GAMEDIFFICULTY=this.checkIfFogMode(t.gameDifficulty),this.isBallTouchingScoreline=!1}checkIfFogMode(t){if(console.log(t),t.includes("-")){this.fogMode=!0,console.log("modalità fog of war");let e=t.indexOf("-");return t.substring(0,e)}return t}preload(){this.load.image("bg_space","assets/pingpong/images/spaceField.png"),this.load.image("dudeShip","assets/pingpong/images/dude_ping_pong.png"),this.load.image("bossShip","assets/pingpong/images/boss_ping_pong.png"),this.load.image("ball","assets/pingpong/images/pingpongBall.png"),this.load.image("home_btn","assets/bombburner/images/btn_sfondo.png"),this.load.image("fog0","assets/pingpong/images/fog0.png"),this.load.image("reset_ball_btn","assets/common/images/reset_btn.png"),this.load.audio("bg_music_pingPong","assets/pingpong/sounds/bg_groove.mp3"),this.load.audio("crowd_gol","assets/pingpong/sounds/crowd_gool.mp3"),this.load.audio("boing0","assets/pingpong/sounds/boing0.mp3")}create(){console.log(this.GAMEDIFFICULTY),console.log(this.fogMode),this.soundsMap.set("bg_music_pingPong",this.sound.add("bg_music_pingPong")),this.soundsMap.set("crowd_gol",this.sound.add("crowd_gol")),this.soundsMap.set("boing0",this.sound.add("boing0")),this.soundsMap.get("bg_music_pingPong").play(),this.resetball_btn_ref=this.add.image(this.canvasWidth/1.2,50,"reset_ball_btn").setDepth(12).setScale(.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.resetBall()}),this.btnHome_Ref=this.add.image(this.canvasWidth/1.1,50,"home_btn").setDepth(12).setScale(.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop("pingpong"),this.scene.start("startmenu")}),this.cursor=this.input.keyboard.createCursorKeys(),this.bg=this.add.image(this.canvasWidth/2,this.canvasHeight/2,"bg_space"),this.dudePoints_Ref=this.add.text(this.canvasWidth/2-80,50,this.dudePoints).setScale(4).setDepth(11),this.bossPoints_Ref=this.add.text(this.canvasWidth/2+45,50,this.bossPoints).setScale(4).setDepth(11),this.dudeShip=this.physics.add.sprite(100,this.canvasHeight/2,"dudeShip").setRotation(Phaser.Math.DegToRad(-90)).setSize(300,300).setDisplaySize(100,100),this.dudeShip.body.immovable=!0,this.bossShip=this.physics.add.sprite(this.canvasWidth-100,this.canvasHeight/2,"bossShip").setRotation(Phaser.Math.DegToRad(90)).setSize(300,300).setDisplaySize(100,100),this.bossShip.body.immovable=!0,this.ball=this.physics.add.sprite(this.canvasWidth/2,this.canvasHeight/2,"ball").setScale(.1).setBounce(1,1).setCollideWorldBounds(!0).setVelocityX(-220),this.physics.add.collider(this.dudeShip,this.ball,()=>{this.onBallCollided(this.GAMEDIFFICULTY)},null,this),this.scoreLine0=this.add.rectangle(0,this.canvasHeight/2,50,this.canvasHeight,65280).setOrigin(.5,.5),this.scoreLine1=this.add.rectangle(this.canvasWidth,this.canvasHeight/2,50,this.canvasHeight,16711680).setOrigin(.5,.5),this.physics.add.existing(this.scoreLine0,!0),this.physics.add.existing(this.scoreLine1,!0)}update(t,e){this.isFirstStart||this.ballSpin<=.5?this.ballRotateRight():this.ballRotateLeft(),this.addFogOfWar("fog0"),this.checkCursorInput(),this.isScoreMade(),this.isOpponentInterceptingBall(),this.isGameEnded()}addFogOfWar(t){this.fogMode&&this.countFog<20&&(this.countFog++,this.add.image(this.canvasWidth/1.35,this.canvasHeight/2,t).setDepth(10).setScale(2).setRotation(Phaser.Math.DegToRad(270)))}isGameEnded(){(parseInt(this.bossPoints)>=5||parseInt(this.dudePoints)>=5)&&(this.sound.stopAll(),this.scene.stop("pingpong"),this.scene.start("gameover",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName,sceneName:this.scene.key,isGameVictory:parseInt(this.dudePoints)>=5,punteggioFinale:`${this.dudePoints}/${this.bossPoints}`,gameDifficult:this.GAMEDIFFICULTY,fogModeOn:this.fogMode}))}isOpponentInterceptingBall(){switch(this.GAMEDIFFICULTY){case"EASY":this.easyMode(this.GAMEDIFFICULTY);break;case"MEDIUM":this.mediumMode(this.GAMEDIFFICULTY);break;case"HARD":this.hardMode(this.GAMEDIFFICULTY)}}isBallInBossSide(){return this.ball.x>this.canvasWidth/2&&this.ball.x<this.canvasWidth-50}interceptBall(t){this.isBallInBossSide()&&this.startComputing(t)}startComputing(t){this.bossInterceptingBall=!0,this.bossShip.body.immovable=!1,this.canvasWidth-this.ball.x<=400&&this.tweens.add({targets:this.bossShip,y:this.ball.body.y,duration:"EASY"===t&&this.difficultyParams.tweenDuration.easy||"MEDIUM"===t&&this.difficultyParams.tweenDuration.medium||"HARD"===t&&this.difficultyParams.tweenDuration.hard,ease:"Linear",onUpdate:()=>{this.bossShip.body.y=this.bossShip.y-this.bossShip.displayHeight/2,this.checkCollision_general(this.ball,this.bossShip)&&!this.isBallTouchingScoreline&&(this.playSoundIfNotAlreadyPlayed("boing0"),this.invertBallVelocity(t,250))},onComplete:()=>{this.bossShip.setPosition(this.canvasWidth-100,this.canvasHeight/2),this.bossShip.body.reset(this.canvasWidth-100,this.canvasHeight/2),this.bossShip.body.immovable=!0,this.bossInterceptingBall=!1}})}returnControlledVectorialSpeed(t,e){const s=Math.sqrt(t*t+e*e);if(s>this.MAX_BALL_SPEED){const i=this.MAX_BALL_SPEED/s;return{vx:t*i,vy:e*i}}return{vx:t,vy:e}}invertBallVelocity(t,e){let s=this.ball.body.velocity.x,i=this.ball.body.velocity.y;s<200&&(s+=e),i<200&&(i+=e),s=-s,i+=100*(Math.random()-this.returnYVariation(t));let a=this.returnControlledVectorialSpeed(s,i);this.ball.body.setVelocity(this.returnIncrement(a.vx,t),this.returnIncrement(a.vy,t))}returnIncrement(t,e){return t*("EASY"===e&&this.difficultyParams.incrementV.easy||"MEDIUM"===e&&this.difficultyParams.incrementV.medium||"HARD"===e&&this.difficultyParams.incrementV.hard)}returnYVariation(t){return"EASY"===t&&this.difficultyParams.yVariation.easy||"MEDIUM"===t&&this.difficultyParams.yVariation.medium||"HARD"===t&&this.difficultyParams.yVariation.hard}easyMode(t){this.interceptBall(t)}mediumMode(t){this.interceptBall(t)}hardMode(t){this.interceptBall(t)}isScoreMade(){if(this.checkCollision_general(this.ball,this.scoreLine0)){this.isBallTouchingScoreline=!0;let t=parseInt(this.bossPoints)+1;this.bossPoints=t.toString(),this.updateVisualScore(this.bossPoints_Ref,this.bossPoints),this.ball.body.moves=!1,this.soundsMap.get("crowd_gol").play(),this.time.delayedCall(2e3,()=>{this.resetBall(),this.ball.body.moves=!0})}if(this.checkCollision_general(this.ball,this.scoreLine1)){this.isBallTouchingScoreline=!0;let t=parseInt(this.dudePoints)+1;this.dudePoints=t.toString(),this.updateVisualScore(this.dudePoints_Ref,this.dudePoints),this.ball.body.moves=!1,this.sound.add("crowd_gol").play(),this.time.delayedCall(2e3,()=>{this.resetBall(),this.ball.body.moves=!0})}}updateVisualScore(t,e){t.setText(e)}resetBall(){this.isFirstStart=!0,this.ball.setPosition(this.canvasWidth/2,this.canvasHeight/2);let t=Math.random(),e=Math.random();this.ball.setVelocityY(e<.5?this.BALLVELOCITY:-this.BALLVELOCITY),this.ball.setVelocityX(t<.5?this.BALLVELOCITY:-this.BALLVELOCITY),this.isBallTouchingScoreline=!1}checkCollision_general(t,e){if(t&&e&&this.physics.overlap(t,e))return!0}playSoundIfNotAlreadyPlayed(t){this.soundsMap.get(t)&&!this.soundsMap.get(t).isPlaying&&this.soundsMap.get(t).play()}onBallCollided(t){this.playSoundIfNotAlreadyPlayed("boing0"),this.isFirstStart=!1,this.ballSpin=Math.random();let e="EASY"===t&&this.difficultyParams.incrementV.easy||"MEDIUM"===t&&this.difficultyParams.incrementV.medium||"HARD"===t&&this.difficultyParams.incrementV.hard,s=this.ball.body.velocity.x,i=this.ball.body.velocity.y,a=this.returnControlledVectorialSpeed(s*e,i*e);this.ball.setVelocity(a.vx,a.vy)}ballRotateRight(){this.ball.rotation+=.1}ballRotateLeft(){this.ball.rotation-=.1}checkCursorInput(){this.dudeShip.body.y>=this.canvasHeight-90&&(this.isBorderDownReached=!0,this.dudeShip.setVelocityY(0)),this.dudeShip.body.y<=10&&(this.isBorderUpReached=!0,this.dudeShip.setVelocityY(0)),this.cursor.up.isDown&&!this.isBorderUpReached&&(this.isBorderDownReached=!1,this.isBorderUpReached=!1,this.dudeShip.setVelocityY(-250)),this.cursor.down.isDown&&!this.isBorderDownReached&&(this.isBorderDownReached=!1,this.isBorderUpReached=!1,this.dudeShip.setVelocityY(250))}}function S(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class B extends Phaser.Scene{constructor(){super("choosepongdifficulty"),S(this,"canvasWidth",null),S(this,"canvasHeight",null),S(this,"gameName",null),S(this,"gameDifficulty",null)}init(t){this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight,this.gameName=t.gameName}preload(){}create(){this.add.text(this.canvasWidth/2,this.canvasHeight/8,"Scegli la difficoltà di gioco:",{fontStyle:"bold"}).setOrigin(.5,.5).setFontSize(40),this.add.text(this.canvasWidth/2,this.canvasHeight/8+100,"FACILE",{fontStyle:"bold"}).setOrigin(.5,.5).setFontSize(40).setColor("green").setInteractive({useHandCursor:!0}).once("pointerdown",()=>{this.chooseDifficulty("EASY"),this.stopSceneAndStartPingPong()}),this.add.text(this.canvasWidth/2,this.canvasHeight/8+200,"MEDIO",{fontStyle:"bold"}).setOrigin(.5,.5).setFontSize(40).setColor("orange").setInteractive({useHandCursor:!0}).once("pointerdown",()=>{this.chooseDifficulty("MEDIUM"),this.stopSceneAndStartPingPong()}),this.add.text(this.canvasWidth/2,this.canvasHeight/8+300,"DIFFICILE",{fontStyle:"bold"}).setOrigin(.5,.5).setFontSize(40).setColor("red").setInteractive({useHandCursor:!0}).once("pointerdown",()=>{this.chooseDifficulty("HARD"),this.stopSceneAndStartPingPong()}),this.add.text(this.canvasWidth/2,this.canvasHeight/8+400,"FOG OF WAR",{fontStyle:"bold"}).setOrigin(.5,.5).setFontSize(40).setColor("purple").setInteractive({useHandCursor:!0}).once("pointerdown",()=>{this.chooseDifficulty("HARD-F"),this.stopSceneAndStartPingPong()})}chooseDifficulty(t){this.gameDifficulty=t}stopSceneAndStartPingPong(){this.scene.stop("choosepongdifficulty"),this.scene.start("pingpong",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName,gameDifficulty:this.gameDifficulty})}update(){}}function D(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class C{constructor(t){D(this,"scene",null),D(this,"currSongPlayed",null),D(this,"index",0),this.scene=t,this.mapSounds=new Map}getSound(t){return this.mapSounds.get(t)}resetDefault(){this.mapSounds=new Map}addAudio(t,e){const s=this.scene.sound.add(t,e);this.mapSounds.set(t,s)}playSound(t){this.mapSounds.get(t).play()}stopSound(t){this.mapSounds.get(t).stop()}isSoundAlreadyPlaying(t){return this.mapSounds.get(t).isPlaying}stopAllSounds(){for(let t of this.mapSounds.values())t.stop()}isAnySoundAlreadyPlaying(){for(let t of this.mapSounds.values())if(t.isPlaying)return!0;return!1}loopSounds(t){this.isAnySoundAlreadyPlaying()||(this.currSongPlayed=t[this.index],!this.isSoundAlreadyPlaying(this.currSongPlayed)&&this.playSound(this.currSongPlayed),this.getSound(this.currSongPlayed).once("complete",()=>{console.log("canzone terminata evento acchiappato!!"),this.index===t.length-1?this.index=0:this.index++,this.currSongPlayed=t[this.index],this.loopSounds(t)}))}}const T=270,k="red",x="black",M=15,A=22,H=Math.PI/3,P=3;function R(t,e){return t/2+T*Math.cos(e)}function w(t,e){return t/2+T*Math.sin(e)}function W(t){let e,s=!1,i=0;for(;!s&&i<100&&(i++,e=Math.random()*(2*Math.PI),0!==t.length);)t.some(t=>{Math.abs(e-t)<P?console.log("distanza troppo piccola. tenta di nuovo."):s=!0});return e}function N(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class I{constructor(t,e){N(this,"passingTime",0),N(this,"isBossAttacking",!1),N(this,"laserBean_group",null),N(this,"rifleAims_Group",null),N(this,"flameGroup",null),N(this,"semicircle",null),N(this,"semicircleTrace",null),N(this,"canvasW",null),N(this,"canvasH",null),N(this,"countDown","2"),N(this,"countDown_text",null),N(this,"explosion_group",null),N(this,"countDownFunction",null),N(this,"alienPiranha",null),N(this,"splashSprite",null),this.boss=null,this.scene=t,this.soundsManager=e}resetDefault(){this.passingTime=0,this.isBossAttacking=!1,this.laserBean_group=null,this.rifleAims_Group=null,this.flameGroup=null,this.semicircle=null,this.semicircleTrace=null,this.canvasW=null,this.canvasH=null,this.countDown="2",this.countDown_text=null,this.explosion_group=null,this.countDownFunction=null}getLaserBeanGroup(){return this.laserBean_group}getFlameGroup(){return this.flameGroup}getExplosionsGroup(){return this.explosion_group}getAlienPiranha(){return this.alienPiranha}create(t,e){this.canvasW=t,this.canvasH=e,this.flameGroup=this.scene.add.group(),this.laserBean_group=this.scene.add.group(),this.rifleAims_Group=this.scene.add.group(),this.explosion_group=this.scene.add.group(),this.boss=this.scene.physics.add.sprite(this.canvasW/2,this.canvasH/2,"circular_boss").setScale(.2),this.countDown_text=this.scene.add.text(this.canvasW/18,this.canvasH/2,this.countDown).setScale(10).setVisible(!1),this.alienPiranha=this.scene.physics.add.sprite(0,0,"alienPiranha").setScale(.3).setVisible(!1).play("piranha1"),this.splashSprite=this.scene.add.sprite(0,0,"splash").setVisible(!1)}update(t,e){this.rotateBoss(),this.bossAttacks(t,e)}createBean(t){return this.scene.physics.add.sprite(this.boss.x,this.boss.y,t).setOrigin(.5,.5)}rotateBoss(){this.boss.body.rotation+=.5}bossAttacks(t,e){if(this.passingTime+=t,!this.isBossAttacking&&this.passingTime>=3e3){this.passingTime=0;let t=Math.random();console.log(t),t<.25&&this.laserBeans(),t>=.25&&t<.5&&this.laserSemicircles(e),t>=.5&&t<.75&&this.detonateBombs(),t>=.75&&this.spawnAlienPiranha()}}showPiranhaSplash(t,e){this.soundsManager.playSound("splashSound"),this.splashSprite.setPosition(t,e).setVisible(!0).setDepth(5).play("splashAnim").once("animationcomplete",()=>{this.scene.time.delayedCall(300,()=>{this.splashSprite.setVisible(!1)})})}showPiranha(t,e,s){this.scene.time.delayedCall(500,()=>{this.alienPiranha.body.enable=!0,this.soundsManager.playSound("biteSound"),this.alienPiranha.setPosition(t,e).setVisible(!0).setDepth(5);let i={value:s},a=s+Math.PI;this.scene.tweens.add({targets:i,value:a,duration:2500,ease:"Linear",onUpdate:(t,e,s,i,a,o)=>{let n=t.getValue();this.alienPiranha.x<=this.canvasW/2?this.alienPiranha.flipX=!0:this.alienPiranha.flipX=!1,this.alienPiranha.setPosition(R(this.canvasW,n),w(this.canvasH,n))},onComplete:()=>{console.log("Movimento completato!"),this.isBossAttacking=!1,this.alienPiranha.setVisible(!1),this.alienPiranha.body.enable=!1,this.soundsManager.isSoundAlreadyPlaying("biteSound")&&this.soundsManager.stopSound("biteSound"),this.showPiranhaSplash(R(this.canvasW,a),w(this.canvasH,a))}})})}spawnAlienPiranha(){if(this.isBossAttacking)return;this.isBossAttacking=!0;let t=Phaser.Math.DegToRad(Math.floor(361*Math.random())),e=R(this.canvasW,t),s=w(this.canvasH,t);this.showPiranhaSplash(e,s),this.showPiranha(e,s,t)}detonateBombs(){this.isBossAttacking=!0;const t=this.showRifleAims();this.showCountDownBeforeExplosions(t),this.resetCountDown()}showRifleAims(){let t=M,e=A,s=Math.floor(Math.random()*(e-t+1))+t;const i=[],a=[];this.soundsManager.playSound("teleportSound");for(let t=0;t<s;t++){let t=W(a);a.push(t);let e={x:R(this.canvasW,t),y:w(this.canvasH,t),texture:"rifleAim"},s=this.scene.add.sprite(e.x,e.y,e.texture,!0).setScale(.5);s.setTint(18687),this.rifleAims_Group.add(s),i.push({x:e.x,y:e.y})}return console.log(i),console.log(a),i}addExplosions(t){for(let e of t){let t=this.scene.physics.add.sprite(e.x,e.y,"explosion_2").setOrigin(.5,.5).setScale(.6).play("f0");this.explosion_group.add(t)}this.scene.time.delayedCall(300,()=>{this.explosion_group.children.iterate(t=>{t.play("f1"),this.soundsManager.playSound("bombExplosion")}),this.rifleAims_Group.clear(!0,!0)}),this.scene.time.delayedCall(1e3,()=>{this.explosion_group.clear(!0,!0),this.isBossAttacking=!1})}showCountDownBeforeExplosions(t){this.countDownFunction=this.scene.time.addEvent({delay:1e3,repeat:1,callback:()=>{let e=parseInt(this.countDown);e--,this.countDown=e.toString(),this.countDown_text.setText(e.toString()),"1"===this.countDown&&this.addExplosions(t)}})}resetCountDown(){this.scene.time.delayedCall(200,()=>{this.countDown="2"})}laserSemicircles(t){this.isBossAttacking=!0,this.showDamagingArea(t)}showDamagingArea(t){let e=t.x-this.canvasW/2,s=t.y-this.canvasH/2,i=Math.atan2(s,e),a=Math.floor(201*Math.random()+50),o=i-Phaser.Math.DegToRad(35),n=i+Phaser.Math.DegToRad(a);const h=16711680;this.showRed(n,o,h);let r=0;this.scene.time.addEvent({delay:300,repeat:4,callback:()=>{r++,console.log("Callback eseguito"),this.semicircleTrace===k?this.showOrange(n,o,16665616):this.showRed(n,o,h),5===r&&this.addDamageToSelectedArea(o,n)}})}addDamageToSelectedArea(t,e){for(let s=t;s<=e;s+=Phaser.Math.DegToRad(3)){let t=this.canvasW/2+T*Math.cos(s),e=this.canvasH/2+T*Math.sin(s);const i=this.scene.physics.add.sprite(t,e,"flame_spriteSheet").play("flameBurning").setScale(.4);this.flameGroup.add(i,!0),this.soundsManager.playSound("fireBurning")}this.scene.time.addEvent({delay:1500,callback:()=>{this.flameGroup.clear(!0,!0),this.isBossAttacking=!1}})}showRed(t,e,s){this.semicircleTrace=k,!this.soundsManager.isSoundAlreadyPlaying("alarm")&&this.soundsManager.playSound("alarm"),this.createSemicircumference(t,e,s)}showOrange(t,e,s){this.semicircleTrace=x,!this.soundsManager.isSoundAlreadyPlaying("alarm")&&this.soundsManager.playSound("alarm"),this.createSemicircumference(t,e,s)}createSemicircumference(t,e,s){this.semicircle=this.scene.add.graphics(),this.semicircle.lineStyle(20,s),this.semicircle.arc(this.canvasW/2,this.canvasH/2,T,e,t,!1),this.semicircle.strokePath(),this.scene.time.addEvent({delay:200,callback:()=>{this.semicircle.clear(),this.semicircle.destroy(),this.semicircle=null}})}laserBeans(){this.isBossAttacking=!0,this.boss.setTexture("circular_boss_funky_pose"),this.soundsManager.playSound("laserBeanRelease");for(let t=0;t<25;t++){let e=this.createBean("redBean");this.laserBean_group.add(e);let s=Math.floor(3*Math.random()),i=t/10*Math.PI*s,a=200,o=Math.cos(i)*a,n=Math.sin(i)*a;e.setVelocity(o,n),e.setRotation(Phaser.Math.DegToRad(o)),this.scene.time.addEvent({delay:T/a*1e3,callback:()=>{e.active&&e.destroy(),this.resetTexture(this.boss,"circular_boss")}})}this.scene.time.addEvent({delay:T/200*1e3+500,callback:()=>{this.isBossAttacking=!1}})}resetTexture(t,e){this.scene.time.addEvent({delay:500,loop:!1,callback:()=>{t.setTexture(e)}})}}function z(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class E{constructor(t){z(this,"boostCloud_group",null),z(this,"deltaRechargeTurbo",0),z(this,"turboLowBar",null),z(this,"turboUpperBar",null),z(this,"HasTurboNeedRecharge",!1),z(this,"turbo",!1),z(this,"invincible",!1),z(this,"hp_sprite",null),z(this,"hpPiece",4),this.dudeShip=null,this.scene=t,this.canvasW=null,this.canvasH=null}resetDefault(){this.boostCloud_group=null,this.deltaRechargeTurbo=0,this.turboLowBar=null,this.turboUpperBar=null,this.HasTurboNeedRecharge=!1,this.turbo=!1,this.invincible=!1,this.hp_sprite=null,this.hpPiece=4}getHpSprite(){return this.hp_sprite}getHpPiece(){return this.hpPiece}getTurbo(){return this.turbo}getInvincible(){return this.invincible}getDudeShip(){return this.dudeShip}getTurboUpperBar(){return this.turboUpperBar}getBoostCloudGroup(){return this.boostCloud_group}getHasTurboNeedRecharge(){return this.HasTurboNeedRecharge}isDudeDeath(){return 0===this.hpPiece}setHpPiece(t){this.hpPiece=t}setTurbo(t){this.turbo=t}setInvincible(t){this.invincible=t}setHasTurboNeedRecharge(t){this.HasTurboNeedRecharge=t}setHpBasedOnHpPiece(){switch(this.hpPiece--,this.shakeHeart(),this.hpPiece){case 4:console.log("vita piena. nessuna manovra.");break;case 3:this.hp_sprite.play("h3/4");break;case 2:this.hp_sprite.play("h2/4");break;case 1:this.hp_sprite.play("h1/4");break;case 0:this.hp_sprite.play("h0")}}shakeHeart(){this.scene.tweens.chain({targets:this.hp_sprite,loop:0,tweens:[{duration:50,x:this.hp_sprite.x+=5},{duration:50,x:this.hp_sprite.x-=5},{duration:50,x:this.hp_sprite.x+=5},{duration:50,x:this.hp_sprite.x-=5},{duration:50,x:this.hp_sprite.x+=5},{duration:50,x:this.hp_sprite.x-=5},{duration:50,x:this.hp_sprite.x+=5},{duration:50,x:this.hp_sprite.x-=5}]})}create(t,e){this.canvasH=e,this.canvasW=t,this.dudeShip=this.scene.physics.add.sprite(t/2+T,e/2,"dudeShip").setScale(.18).setDepth(2),this.boostCloud_group=this.scene.add.group(),this.createTurboBars(),this.createHpSprite()}update(t){this.rechargeTurbo(t)}createHpSprite(){this.hp_sprite=this.scene.add.sprite(this.canvasW/12,this.canvasH/6,"heartsSpriteSheet").setDepth(5).setScale(3).play("hFull")}createTurboBars(){this.turboLowBar=this.scene.add.rectangle(this.canvasW/12,this.canvasH/12,50,20,16711680,1).setDepth(3),this.turboUpperBar=this.scene.add.rectangle(this.canvasW/12,this.canvasH/12,50,20,255,1).setDepth(3)}rechargeTurbo(t){this.deltaRechargeTurbo+=t,this.HasTurboNeedRecharge&&this.deltaRechargeTurbo>=100&&(this.turboUpperBar.width++,this.deltaRechargeTurbo=0),this.turboUpperBar.width>=50&&(this.turboUpperBar.width=50,this.HasTurboNeedRecharge=!1)}}function V(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class O{constructor(t,e){V(this,"scene",null),V(this,"canvasW",null),V(this,"movingRight",!1),V(this,"movingLeft",!1),V(this,"turbo",!1),V(this,"clickingTurbo",!1),this.scene=t,this.canvasW=e}checkPointerClick(t){t.setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.clickingTurbo=!0,this.turbo=!0,console.log("TURBO ACTIVATED")}).on("pointerup",()=>{this.clickingTurbo=!1,this.turbo=!1,console.log("TURBO DEACTIVATED")}),this.scene.input.on("pointerdown",t=>{if(console.log(t.x,"VALOR POINTER X"),t.x>this.canvasW/2){if(this.clickingTurbo)return;this.movingRight=!0,this.movingLeft=!1,console.log("il click sta nella parte destra dello schermo ??",t.x>this.canvasW/2)}t.x<this.canvasW/2&&(this.movingRight=!1,this.movingLeft=!0,console.log("il click sta nella parte sinistra dello schermo ??",t.x<this.canvasW/2))}),this.scene.input.on("pointerup",()=>{this.movingRight=!1,this.movingLeft=!1}),console.log("moving right: ",this.movingRight)}getMovingRight(){return this.movingRight}getMovingLeft(){return this.movingLeft}getClickingTurbo(){return this.clickingTurbo}}function L(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class G{resetDefault(){this.moonSurface=null,this.canvasW=null,this.canvasH=null,this.cursor=null,this.angolo=0,this.keySpace=null,this.m=2,this.d=0,this.u=7,this.timer=`${this.m}:${this.d}${this.u}`,this.timerRef=null,this.deltaSum=0}constructor(t,e){L(this,"moonSurface",null),L(this,"canvasW",null),L(this,"canvasH",null),L(this,"cursor",null),L(this,"angolo",0),L(this,"keySpace",null),L(this,"m",2),L(this,"d",0),L(this,"u",7),L(this,"timer",`${this.m}:${this.d}${this.u}`),L(this,"timerRef",null),L(this,"deltaSum",0),L(this,"movingControlMobileManager",null),L(this,"turboButton_ref",null),this.scene=t,this.dudeShipManager=e}getMoonSurface(){return this.moonSurface}getTimerMinutes(){return this.m}getTimerDecine(){return this.d}getTimerUnit(){return this.u}getTimerFormatted(){return this.timer}create(t,e){this.canvasH=e,this.canvasW=t,this.movingControlMobileManager=new O(this.scene,t),this.cursor=this.scene.input.keyboard.createCursorKeys(),this.keySpace=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.createTimer(),this.createTurboButton(),this.movingControlMobileManager.checkPointerClick(this.turboButton_ref)}createTurboButton(){this.turboButton_ref=this.scene.add.image(this.canvasW/1.2,this.canvasH/1.15,"turboBtn").setScale(.3).setVisible(!1)}update(t){this.checkCursorInput(t),this.updateTimer(t)}addImage(t,e,s,i,a,o){this.scene.add.image(t,e,s).setScale(a).setDepth(i)}createTimer(){this.timerRef=this.scene.add.text(this.canvasW/1.3,this.canvasH/12,this.timer).setDepth(4).setScale(5)}updateTimer(t){if(this.deltaSum+=t,this.deltaSum>=1e3){if(this.deltaSum-=1e3,0===this.d&&0===this.m&&0===this.u)return;0===this.u?(0!==this.d&&(this.d--,this.u=9),0===this.d&&0===this.u&&(this.m--,this.d=5,this.u=9)):this.u--,this.updateTimerVisual()}}updateTimerVisual(){this.timer=`${this.m}:${this.d}${this.u}`,this.timerRef.setText(this.timer)}checkCursorInput(t){let e,s;if((this.cursor.right.isDown||this.movingControlMobileManager.getMovingRight())&&(this.angolo+=H*(this.dudeShipManager.getTurbo()?3:2)*(t/1e3),e=R(this.canvasW,this.angolo),s=w(this.canvasH,this.angolo),this.dudeShipManager.getDudeShip().setPosition(e,s)),(this.cursor.left.isDown||this.movingControlMobileManager.getMovingLeft())&&(this.angolo-=H*(this.dudeShipManager.getTurbo()?3:2)*(t/1e3),e=R(this.canvasW,this.angolo),s=w(this.canvasH,this.angolo),this.dudeShipManager.getDudeShip().setPosition(e,s)),this.dudeShipManager.getTurboUpperBar().width>=1&&(this.keySpace.isDown||this.movingControlMobileManager.getClickingTurbo())){this.dudeShipManager.setTurbo(!0),this.dudeShipManager.getTurboUpperBar().width-=.58,this.dudeShipManager.setHasTurboNeedRecharge(!0);let t=this.scene.add.sprite(e,s,"boost_cloud").play("accelerationBoost");this.dudeShipManager.getBoostCloudGroup().add(t,!0),this.dudeShipManager.getBoostCloudGroup().children.iterate(t=>{t.on("animationcomplete",()=>{t.destroy()})})}else this.dudeShipManager.setTurbo(!1)}}function F(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class U extends Phaser.Scene{constructor(){super("circleofdeath"),F(this,"canvasWidth",null),F(this,"canvasHeight",null),F(this,"gameName",null),F(this,"circleTrace",null),F(this,"firstCollisionHappened",!1),F(this,"isGameVictory",!1),this.sceneName="circleofdeath",this.soundManager=new C(this),this.bossManager=new I(this,this.soundManager),this.dudeShipManager=new E(this),this.ambientManager=new G(this,this.dudeShipManager)}init(t){this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight,this.gameName=t.gameName,this.circleTrace=null,this.firstCollisionHappened=!1,this.ambientManager.resetDefault(),this.dudeShipManager.resetDefault(),this.bossManager.resetDefault(),this.soundManager.resetDefault()}preload(){this.load.image("moon_surface","assets/circleofdeath/images/mars_land.jpg"),this.load.image("circular_boss","assets/circleofdeath/images/circular_boss.png"),this.load.image("circular_boss_funky_pose","assets/circleofdeath/images/boss_funky_pose.png"),this.load.image("redBean","assets/circleofdeath/images/redBean.png"),this.load.image("turboBtn","assets/circleofdeath/images/turboBtn.png"),this.load.image("dudeShip","assets/pingpong/images/dude_ping_pong.png"),this.load.image("rifleAim","assets/circleofdeath/images/rifleAim_0.png"),this.load.spritesheet("boost_cloud","assets/circleofdeath/images/boost_cloud.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("flame_spriteSheet","assets/bombburner/images/bullet_2.png",{frameHeight:151,frameWidth:93}),this.load.spritesheet("heartsSpriteSheet","assets/circleofdeath/images/heart_animated_2.png",{frameHeight:17,frameWidth:17}),this.load.spritesheet("explosion_2","assets/circleofdeath/images/explosion.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("alienPiranha","assets/circleofdeath/images/piranha.png",{frameWidth:250,frameHeight:250}),this.load.spritesheet("splash","assets/circleofdeath/images/water_splash.png",{frameHeight:166.66,frameWidth:166.66}),this.load.audio("bg_funk","assets/circleofdeath/sounds/funk.mp3"),this.load.audio("alarm","assets/circleofdeath/sounds/alarm.mp3"),this.load.audio("fireBurning","assets/circleofdeath/sounds/fireBurning.mp3"),this.load.audio("laserBeanRelease","assets/circleofdeath/sounds/laserBeansSound.mp3"),this.load.audio("dudeShipDamaged","assets/circleofdeath/sounds/dudeShipDamaged.mp3"),this.load.audio("teleportSound","assets/circleofdeath/sounds/teleport.mp3"),this.load.audio("bombExplosion","assets/circleofdeath/sounds/bombExplosion.mp3"),this.load.audio("splashSound","assets/circleofdeath/sounds/splash.mp3"),this.load.audio("biteSound","assets/circleofdeath/sounds/biteSound.mp3")}create(){this.createAnimation("accelerationBoost","boost_cloud",0,8,25,0),this.createAnimation("flameBurning","flame_spriteSheet",0,4,20,-1),this.createAnimation("hFull","heartsSpriteSheet",0,0,20,0),this.createAnimation("h3/4","heartsSpriteSheet",1,1,20,0),this.createAnimation("h2/4","heartsSpriteSheet",2,2,20,0),this.createAnimation("h1/4","heartsSpriteSheet",3,3,20,0),this.createAnimation("h0","heartsSpriteSheet",4,4,20,0),this.createAnimation("f0","explosion_2",0,0,20,0),this.createAnimation("f1","explosion_2",1,11,15,0),this.createAnimation("piranha1","alienPiranha",0,3,10,-1),this.createAnimation("splashAnim","splash",0,8,20,0),this.bossManager.create(this.canvasWidth,this.canvasHeight),this.dudeShipManager.create(this.canvasWidth,this.canvasHeight),this.ambientManager.create(this.canvasWidth,this.canvasHeight),this.ambientManager.addImage(this.canvasWidth,this.canvasHeight,"moon_surface",-1,.5,this.ambientManager.getMoonSurface()),this.soundManager.addAudio("splashSound",{volume:1}),this.soundManager.addAudio("biteSound",{volume:1,loop:!0}),this.soundManager.addAudio("bg_funk",{volume:2,loop:!0}),this.soundManager.addAudio("alarm",{volume:1}),this.soundManager.addAudio("fireBurning",{volume:2}),this.soundManager.addAudio("laserBeanRelease",{volume:1}),this.soundManager.addAudio("dudeShipDamaged",{volume:1}),this.soundManager.addAudio("teleportSound",{volume:1}),this.soundManager.addAudio("bombExplosion",{volume:1}),this.circleTrace=this.add.graphics(),this.circleTrace.lineStyle(2,2699571),this.circleTrace.strokeCircle(this.canvasWidth/2,this.canvasHeight/2,T),this.soundManager.playSound("bg_funk"),this.physics.add.overlap(this.dudeShipManager.getDudeShip(),this.bossManager.getFlameGroup(),this.handleCollisionDudeFlame,this.canDudeTakeDamage,this),this.physics.add.overlap(this.dudeShipManager.getDudeShip(),this.bossManager.getLaserBeanGroup(),this.handleCollisionDudeBean,this.canDudeTakeDamage,this),this.physics.add.overlap(this.dudeShipManager.getDudeShip(),this.bossManager.getExplosionsGroup(),this.handleCollisionDudeExplosion,this.canDudeTakeDamage,this),this.physics.add.overlap(this.dudeShipManager.getDudeShip(),this.bossManager.getAlienPiranha(),this.handleCollisionDudePiranha,this.canDudeTakeDamage,this)}update(t,e){this.bossManager.update(e,this.dudeShipManager.getDudeShip()),this.dudeShipManager.update(e),this.ambientManager.update(e),this.isGameFinished()}isGameFinished(){this.isValueZero(this.ambientManager.getTimerMinutes())&&this.isValueZero(this.ambientManager.getTimerDecine())&&this.isValueZero(this.ambientManager.getTimerUnit())&&(this.soundManager.stopAllSounds(),this.scene.stop("circleofdeath"),this.scene.start("gameover",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName,sceneName:this.scene.key,gameTime:this.ambientManager.getTimerFormatted(),isGameVictory:!0})),this.dudeShipManager.isDudeDeath()&&(this.soundManager.stopAllSounds(),this.scene.stop("circleofdeath"),this.scene.start("gameover",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName,sceneName:this.scene.key,gameTime:this.ambientManager.getTimerFormatted(),isGameVictory:!1}))}isValueZero(t){return 0===t}canDudeTakeDamage(){return!this.dudeShipManager.getInvincible()}handleCollisionDudeFlame(t,e){this.firstCollisionHappened||(console.log("dude subisce danni dalla fiamma!!"),this.firstCollisionHappened=!0,this.dudeShipManager.setInvincible(!0),this.dudeShipManager.setHpBasedOnHpPiece(),this.soundManager.playSound("dudeShipDamaged"),this.time.delayedCall(2200,()=>{this.firstCollisionHappened=!1,this.dudeShipManager.setInvincible(!1)}))}handleCollisionDudeExplosion(t,e){this.firstCollisionHappened||"f0"===e.anims.currentAnim.key||(console.log("dude subisce danni dall esplosione!!"),this.firstCollisionHappened=!0,this.dudeShipManager.setInvincible(!0),this.dudeShipManager.setHpBasedOnHpPiece(),this.soundManager.playSound("dudeShipDamaged"),this.time.delayedCall(2200,()=>{this.firstCollisionHappened=!1,this.dudeShipManager.setInvincible(!1)}))}handleCollisionDudeBean(t,e){this.firstCollisionHappened||(console.log("dude subisce danni dai bean proiettili!!"),this.firstCollisionHappened=!0,this.dudeShipManager.setInvincible(!0),this.dudeShipManager.setHpBasedOnHpPiece(),this.soundManager.playSound("dudeShipDamaged"),e.destroy(),this.time.delayedCall(2200,()=>{this.firstCollisionHappened=!1,this.dudeShipManager.setInvincible(!1)}))}handleCollisionDudePiranha(t,e){this.firstCollisionHappened||(console.log("dude subisce danni dal piranha!!"),this.firstCollisionHappened=!0,this.dudeShipManager.setInvincible(!0),this.dudeShipManager.setHpBasedOnHpPiece(),this.soundManager.playSound("dudeShipDamaged"),this.time.delayedCall(2200,()=>{this.firstCollisionHappened=!1,this.dudeShipManager.setInvincible(!1)}))}createAnimation(t,e,s,i,a,o){this.anims.create({key:t,frames:this.anims.generateFrameNumbers(e,{start:s,end:i}),frameRate:a,repeat:o})}}function j(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class Y extends Phaser.Scene{constructor(){super("gameover"),j(this,"canvasWidth",null),j(this,"canvasHeight",null),j(this,"isGameVictory",null),j(this,"gameName",null),j(this,"sceneName",null),j(this,"punteggioFinale",null),j(this,"livello",null),j(this,"happyDude",null),j(this,"sadDude",null),j(this,"dudeIsPompato",null),j(this,"image",null),j(this,"finalTime",null),j(this,"gameDifficult",null),j(this,"fogMode",null)}init(t){this.canvasWidth=this.checkValue(t.canvasWidth),this.canvasHeight=this.checkValue(t.canvasHeight),this.punteggioFinale=this.checkValue(t.punteggioFinale),this.livello=this.checkValue(t.livello),this.isGameVictory=this.checkValue(t.isGameVictory),this.dudeIsPompato=this.checkValue(t.dudeIsPompato),this.finalTime=this.checkValue(t.gameTime),this.gameName=this.checkValue(t.gameName),this.sceneName=this.checkValue(t.sceneName),this.gameDifficult=this.checkValue(t.gameDifficult),this.fogMode=this.checkValue(t.fogMode)}checkValue(t){return t||null}preload(){this.load.image("sky","assets/bombburner/images/sky.png"),this.load.image("sadDude","assets/bombburner/images/sad_dude_no_bg.png"),this.load.image("happyDude","assets/bombburner/images/happyDude.png"),this.load.image("happy_dude_corazzato","assets/bombburner/images/happy_cavaliere.png"),this.load.image("sad_dude_corazzato","assets/bombburner/images/sad_cavaliere.png"),this.load.image("btn_home","assets/bombburner/images/btn_sfondo.png"),this.load.image("dudeShip_triste","assets/pingpong/images/dudeship_triste.png"),this.load.image("dude_ship_happy","assets/pingpong/images/happy_dude_ship.png"),this.load.audio("gameOver_loser","assets/bombburner/sounds/gameOver.mp3"),this.load.audio("gameOver_winner","assets/bombburner/sounds/gameOver_victory.mp3")}create(){console.log("canvasWidth:",this.canvasWidth),console.log("canvasHeight:",this.canvasHeight),console.log("punteggioFinale:",this.punteggioFinale),console.log("livello:",this.livello),console.log("happyDude:",this.happyDude),console.log("sadDude:",this.sadDude),console.log("isGameVictory:",this.isGameVictory),console.log("dudeIsPompato:",this.dudeIsPompato),console.log("image:",this.image),console.log("finalTime:",this.finalTime),console.log("gameName:",this.gameName),console.log("sceneName:",this.sceneName),this.addImage(this.canvasWidth-200,100,"btn_home",null,5,.7,{cursor:"pointer"},"pointerdown",()=>{this.sound.removeAll(),this.scene.stop("gameover"),this.scene.start("startmenu",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight})}),this.addImage(this.canvasWidth/2,this.canvasHeight/2,"sky",{x:.5,y:.5},0),!this.isGameVictory&&this.sound.play("gameOver_loser"),this.isGameVictory&&this.sound.play("gameOver_winner"),this.showGameOver(),this.pressSpaceToRestart()}choseImageToShow(){return this.isGameVictory&&this.dudeIsPompato&&this.gameName.toLowerCase().includes("bomb")?"happy_dude_corazzato":this.isGameVictory&&!this.dudeIsPompato&&this.gameName.toLowerCase().includes("bomb")?"happyDude":this.isGameVictory||this.dudeIsPompato||!this.gameName.toLowerCase().includes("bomb")?!this.isGameVictory&&this.dudeIsPompato&&this.gameName.toLowerCase().includes("bomb")?"sad_dude_corazzato":!this.isGameVictory&&this.gameName.replace(" ","").toLowerCase().includes("pingpong")||!this.isGameVictory&&this.gameName.replace(" ","").toLowerCase().includes("circle")?"dudeShip_triste":this.isGameVictory&&this.gameName.replace(" ","").toLowerCase().includes("pingpong")||this.isGameVictory&&this.gameName.replace(" ","").toLowerCase().includes("circle")?"dude_ship_happy":void 0:"sadDude"}showGameOver(){this.image=this.add.image(this.canvasWidth/2,this.canvasHeight/4,this.choseImageToShow()).setOrigin(.5,.5).setDepth(0).setScale(.5),"sad_dude_corazzato"===this.image.texture.key&&this.image.setScale(.3),this.addText(this.canvasWidth/2,this.canvasHeight/2,"Game Over",{fontSize:"30px",color:"#ff0000",fontStyle:"bold"},{x:.5,y:.5}),this.gameName.toLowerCase().includes("bomb")&&this.addText(this.canvasWidth/2,this.canvasHeight/1.8,`Punteggio finale: ${this.punteggioFinale}`,{fontSize:"30px",color:"#ff0000",fontStyle:"bold"},{x:.5,y:.5}),this.gameName.toLowerCase().includes("bomb")&&this.addText(this.canvasWidth/2,this.canvasHeight/1.6,`Livello raggiunto: ${this.livello}`,{fontSize:"30px",color:"#ff0000",fontStyle:"bold"},{x:.5,y:.5}),this.gameName.toLowerCase().includes("bomb")&&this.addText(this.canvasWidth/2,this.canvasHeight/1.4,`Tempo di gioco: ${this.finalTime}`,{fontSize:"30px",color:"#ff0000",fontStyle:"bold"},{x:.5,y:.5}),this.isGameVictory?(this.pressEnterToSavePunteggio(),this.addText(this.canvasWidth/2,this.canvasHeight/1.1,"premi Invio per salvare il tuo punteggio.",{fontSize:"30px",color:"#f1bb09",fontStyle:"bold"},{x:.5,y:.5})):this.addText(this.canvasWidth/2,this.canvasHeight/1.1,"PER SALVARE DEVI VINCERE LA PARTITA",{fontSize:"30px",color:"#e05e0f",fontStyle:"bold"},{x:.5,y:.5}),this.addText(this.canvasWidth/2,this.canvasHeight/1.2,"premi spazio per ricominciare.",{fontSize:"30px",color:"#ff0000",fontStyle:"bold"},{x:.5,y:.5})}pressSpaceToRestart(){this.input.keyboard.once("keydown-SPACE",()=>{this.sound.removeAll(),this.sceneName.trim().toLowerCase().includes("pingpong")&&"HARD"===this.gameDifficult&&this.fogMode&&this.scene.start(this.sceneName,{gameDifficulty:"HARD-F"}),this.scene.start(this.sceneName)})}pressEnterToSavePunteggio(){this.input.keyboard.once("keydown-ENTER",()=>{this.sound.stopAll(),this.scene.stop("gameover"),this.scene.start("savescore",{gameName:this.gameName,punteggioFinale:this.punteggioFinale,livello:this.livello,tempoGioco:this.finalTime,canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight})})}addImage(t,e,s,i,a,o,n,h,r){const l=this.add.image(t,e,s);i&&i.x&&i.y&&l.setOrigin(i.x,i.y),a&&l.setDepth(a),o&&l.setScale(o),n&&l.setInteractive(n),h&&r&&l.once(h,r)}addText(t,e,s,i,a){const o=this.add.text(t,e,s,i);a&&a.x&&a.y&&o.setOrigin(a.x,a.y)}update(){}}function $(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class X{constructor(t){$(this,"COLOR_RIEMPIMENTO",32768),$(this,"COLOR_OUTERCONTAINER",13816530),$(this,"POINTSGOAL",100),$(this,"DOUBLEONETHROW",25),$(this,"TOTAL_OUTERCONTAINERHEIGTH",300),$(this,"canvasW",null),$(this,"canvasH",null),$(this,"dudeOuterContainer",null),$(this,"dudeContainerVolume",null),$(this,"dudeVolumeValue",0),$(this,"bossOuterContainer",null),$(this,"bossContainerVolume",null),$(this,"bossVolumeValue",0),$(this,"notificationRef",null),this.scene=t}getDoubleOneThrow(){return this.DOUBLEONETHROW}getTotalContainerHeight(){return this.TOTAL_OUTERCONTAINERHEIGTH}getPointsGoal(){return this.POINTSGOAL}getDudeContainerVolume(){return this.dudeContainerVolume}getBossContainerVolume(){return this.bossContainerVolume}resetClass(){this.dudeOuterContainer=null,this.dudeContainerVolume=null,this.dudeVolumeValue=0,this.bossOuterContainer=null,this.bossContainerVolume=null,this.bossVolumeValue=0,this.notificationRef=null}create(t,e){this.canvasW=t,this.canvasH=e,this.addImage(this.canvasW/2,this.canvasH/2,"table_poker_bg",-1,1),this.addImage(this.canvasW/9.7,this.canvasH/1.2,"dudePoker",0,.4),this.addImage(this.canvasW/1.15,this.canvasH/1.2,"bossPoker",0,.5),this.addRectangle(16777215,this.canvasW/2,0,2,this.canvasH),this.dudeOuterContainer=this.addRectangle(this.COLOR_OUTERCONTAINER,this.canvasW/20,this.canvasH/18,35,300),this.dudeContainerVolume=this.addRectangle(this.COLOR_RIEMPIMENTO,this.canvasW/20,this.canvasH/18,35,this.dudeVolumeValue),this.bossOuterContainer=this.addRectangle(this.COLOR_OUTERCONTAINER,this.canvasW/1.1,this.canvasH/18,35,300),this.bossContainerVolume=this.addRectangle(this.COLOR_RIEMPIMENTO,this.canvasW/1.1,this.canvasH/18,35,this.bossVolumeValue),this.addNumerationDent(this.canvasW/1.15,this.canvasH/18+280,"0-"),this.addNumerationDent(this.canvasW/1.175,this.canvasH/18+130,"50-"),this.addNumerationDent(this.canvasW/1.175,this.canvasH/18-20,"100-"),this.addNumerationDent(this.canvasW/11,this.canvasH/18-20,"-100"),this.addNumerationDent(this.canvasW/11,this.canvasH/18+130,"-50"),this.addNumerationDent(this.canvasW/11,this.canvasH/18+280,"-0"),this.createNotificationWhoIsTurn()}update(t,e){}createNotificationWhoIsTurn(){this.notificationRef=this.scene.add.text(this.canvasW/7.5,this.canvasH/10,"È il tuo turno...",{fontSize:"15px",fill:"#ffffff",stroke:"#000000",strokeThickness:4}).setDepth(2).setScale(2.2)}updateNotificationPosition(t,e){this.notificationRef.setPosition(t,e)}addNumerationDent(t,e,s){this.scene.add.text(t,e,s).setScale(2)}addImage(t,e,s,i,a){this.scene.add.image(t,e,s).setDepth(i).setScale(a)}addRectangle(t,e,s,i,a){return this.scene.add.graphics().fillStyle(t).fillRect(e,s,i,a).setData({x:e,y:s,width:i,height:a,prevVal:0})}updateVolume(t,e){const s=t.data.values;0!==e?s.prevVal+=e:s.prevVal=0,console.log(s.prevVal,"prevval della grafica "),t.clear(),console.log(s);const i=this.canvasH/18+this.TOTAL_OUTERCONTAINERHEIGTH-(0===s.prevVal?e:s.prevVal);t.fillStyle(this.COLOR_RIEMPIMENTO).fillRect(s.x,i,s.width,0===s.prevVal?e:s.prevVal),t.strokePath(),console.log("valore passato al container volume",e)}}function K(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class q{constructor(t){K(this,"canvasW",null),K(this,"canvasH",null),K(this,"d1",0),K(this,"d2",0),K(this,"currentCountDude",0),K(this,"currentCountBoss",0),K(this,"currentCountDudeRef",null),K(this,"currentCountBossRef",null),K(this,"d1Ref",null),K(this,"d2Ref",null),K(this,"iconDiceLaunch",null),this.scene=t}resetClass(){this.d1=0,this.d2=0,this.currentCountDude=0,this.currentCountBoss=0,this.currentCountDudeRef=null,this.currentCountBossRef=null,this.d1Ref=null,this.d2Ref=null,this.iconDiceLaunch=null}getCurrentCountDude(){return this.currentCountDude}getCurrentCountBoss(){return this.currentCountBoss}updateValue(t,e){return t+e}setCurrentCountDude(t){this.currentCountDude=t}setCurrentCountBoss(t){this.currentCountBoss=t}getCurrentCountDudeRef(){return this.currentCountDudeRef}getCurrentCountBossRef(){return this.currentCountBossRef}getD1Value(){return this.d1}getD2Value(){return this.d2}returnFinalScore(){return`${this.currentCountDude} / ${this.currentCountBoss}`}create(t,e){this.canvasW=t,this.canvasH=e,this.d1Ref=this.createDiceRef(this.canvasW/4,this.canvasH/4,this.d1),this.d2Ref=this.createDiceRef(this.canvasW/4,this.canvasH/2,this.d2),this.createIconLaunchDices(),this.setIconLaunchDicesInteractive(),this.currentCountDudeRef=this.scene.add.text(this.canvasW/3.5,this.canvasH/1.25,"0",{fontSize:"12px",fill:"#ff0000",stroke:"#000000",strokeThickness:2}).setDepth(3).setScale(6),this.currentCountBossRef=this.scene.add.text(this.canvasW/1.5,this.canvasH/1.25,"0",{fontSize:"12px",fill:"#ff0000",stroke:"#000000",strokeThickness:2}).setDepth(3).setScale(6)}createDiceRef(t,e,s){return this.scene.add.text(t,e,s,{fontSize:"16px",fill:"#ffffff",stroke:"#000000",strokeThickness:2}).setDepth(4).setScale(10)}createIconLaunchDices(){this.iconDiceLaunch=this.scene.add.image(this.canvasW/2,this.canvasH-100,"launchDices").setScale(.2)}updateDiceRef(t,e){e.setText(t.toString())}updateD1Position(t,e){this.d1Ref.setPosition(t,e)}updateD2Position(t,e){this.d2Ref.setPosition(t,e)}setIconLaunchDicesInteractive(){this.iconDiceLaunch.setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.rollsDice(),this.updateDiceRef(this.d1,this.d1Ref),this.updateDiceRef(this.d2,this.d2Ref)})}rollsDice(){console.log("dati tirati"),this.d1=Math.floor(6*Math.random())+1,this.d2=Math.floor(6*Math.random())+1,console.log("d1:",this.d1),console.log("d2:",this.d2)}}function Z(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class J{constructor(t){Z(this,"canvasW",null),Z(this,"canvasH",null),Z(this,"isDudeTurn",!0),Z(this,"turnSwitcher_ref",null),this.scene=t}resetClass(){this.isDudeTurn=!0,this.turnSwitcher_ref=null}getIsDudeTurn(){return this.isDudeTurn}invertTurn(){this.isDudeTurn=!this.isDudeTurn}create(t,e){this.canvasW=t,this.canvasH=e,this.createIconSwitchTurn(),this.addInteractiveToSwitchTurn()}createIconSwitchTurn(){this.turnSwitcher_ref=this.scene.add.image(this.canvasW/2,this.canvasH-300,"switchTurn").setScale(.3)}addInteractiveToSwitchTurn(){this.turnSwitcher_ref.setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.invertTurn()})}}function Q(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class tt extends Phaser.Scene{constructor(){super("pigs"),Q(this,"canvasWidth",null),Q(this,"canvasHeight",null),Q(this,"gameName",null),Q(this,"d1_currVal",0),Q(this,"d2_currVal",0),this.dicesmanager=new q(this),this.ambientManager=new X(this),this.turnManager=new J(this),this.soundsManager=new C(this)}init(t){this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight,this.gameName=t.gameName,this.ambientManager.resetClass(),this.dicesmanager.resetClass(),this.turnManager.resetClass()}preload(){this.load.image("table_poker_bg","assets/pigs/images/poker_table_green_fabric.png"),this.load.image("dudePoker","assets/bombburner/images/mezzoBustoDude.png"),this.load.image("bossPoker","assets/bombburner/images/boss_silly.png"),this.load.image("launchDices","assets/pigs/images/lancia_dadi.jpg"),this.load.image("switchTurn","assets/pigs/images/swipePlayer.png"),this.load.audio("lounge_jazz_1","assets/pigs/sounds/lounge_jazz1.mp3"),this.load.audio("lounge_jazz_2","assets/pigs/sounds/lounge_jazz2.mp3")}create(){this.ambientManager.create(this.canvasWidth,this.canvasHeight),this.dicesmanager.create(this.canvasWidth,this.canvasHeight),this.turnManager.create(this.canvasWidth,this.canvasHeight),this.soundsManager.addAudio("lounge_jazz_1",{volume:1}),this.soundsManager.addAudio("lounge_jazz_2",{volume:1}),this.soundsManager.loopSounds(["lounge_jazz_1","lounge_jazz_2"])}update(t,e){if(this.turnManager.getIsDudeTurn()&&(this.ambientManager.updateNotificationPosition(this.canvasWidth/7.5,this.canvasHeight/10),this.dicesmanager.updateD1Position(this.canvasWidth/4,this.canvasHeight/4),this.dicesmanager.updateD2Position(this.canvasWidth/4,this.canvasHeight/2)),this.turnManager.getIsDudeTurn()||(this.ambientManager.updateNotificationPosition(this.canvasWidth/1.9,this.canvasHeight/10),this.dicesmanager.updateD1Position(this.canvasWidth/1.5,this.canvasHeight/4),this.dicesmanager.updateD2Position(this.canvasWidth/1.5,this.canvasHeight/2)),this.d1_currVal===this.dicesmanager.getD1Value()&&this.d2_currVal===this.dicesmanager.getD2Value())return;if(this.d1_currVal=this.dicesmanager.getD1Value(),this.d2_currVal=this.dicesmanager.getD2Value(),console.log("registrato variazione del valore dei dadi"),this.IsAnyDiceValueOne(this.d1_currVal,this.d2_currVal))return this.turnManager.getIsDudeTurn()&&(this.ambientManager.updateVolume(this.ambientManager.getDudeContainerVolume(),0),this.dicesmanager.setCurrentCountDude(0),this.dicesmanager.getCurrentCountDudeRef().setText("0")),this.turnManager.getIsDudeTurn()||(this.ambientManager.updateVolume(this.ambientManager.getBossContainerVolume(),0),this.dicesmanager.setCurrentCountBoss(0),this.dicesmanager.getCurrentCountBossRef().setText("0")),void this.turnManager.invertTurn();if(this.d1_currVal===this.d2_currVal){let t=2*(this.d1_currVal+this.d2_currVal);return 1===this.d1_currVal&&1===this.d2_currVal&&(t=this.ambientManager.getDoubleOneThrow()),this.turnManager.getIsDudeTurn()&&(this.ambientManager.updateVolume(this.ambientManager.getDudeContainerVolume(),this.proportionateValues(t)),this.dicesmanager.setCurrentCountDude(this.dicesmanager.updateValue(this.dicesmanager.getCurrentCountDude(),t)),this.dicesmanager.getCurrentCountDudeRef().setText(this.dicesmanager.getCurrentCountDude().toString())),void(this.turnManager.getIsDudeTurn()||(this.ambientManager.updateVolume(this.ambientManager.getBossContainerVolume(),this.proportionateValues(t)),this.dicesmanager.setCurrentCountBoss(this.dicesmanager.updateValue(this.dicesmanager.getCurrentCountBoss(),t)),this.dicesmanager.getCurrentCountBossRef().setText(this.dicesmanager.getCurrentCountBoss().toString())))}let s=this.d1_currVal+this.d2_currVal;this.turnManager.getIsDudeTurn()&&(this.ambientManager.updateVolume(this.ambientManager.getDudeContainerVolume(),this.proportionateValues(s)),this.dicesmanager.setCurrentCountDude(this.dicesmanager.updateValue(this.dicesmanager.getCurrentCountDude(),s)),this.dicesmanager.getCurrentCountDudeRef().setText(this.dicesmanager.getCurrentCountDude().toString())),this.turnManager.getIsDudeTurn()||(this.ambientManager.updateVolume(this.ambientManager.getBossContainerVolume(),this.proportionateValues(s)),this.dicesmanager.setCurrentCountBoss(this.dicesmanager.updateValue(this.dicesmanager.getCurrentCountBoss(),s)),this.dicesmanager.getCurrentCountBossRef().setText(this.dicesmanager.getCurrentCountBoss().toString())),this.isGameOver()}proportionateValues(t){return console.log(t,"somma dei dati al lancio, prima di essere proporzionati ai 300px della barra. "),t*this.ambientManager.getTotalContainerHeight()/this.ambientManager.getPointsGoal()}IsAnyDiceValueOne(t,e){return 1===t||1===e}isGameOver(){(this.dicesmanager.getCurrentCountDude()>=100||this.dicesmanager.getCurrentCountBoss()>=100)&&this.soundsManager.stopAllSounds(),this.dicesmanager.getCurrentCountDude()>=100&&(this.scene.stop("pigs"),this.scene.start("gameover",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName,sceneName:this.scene.key,punteggioFinale:this.dicesmanager.returnFinalScore(),isGameVictory:!0})),this.dicesmanager.getCurrentCountBoss()>=100&&(this.scene.stop("pigs"),this.scene.start("gameover",{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName,sceneName:this.scene.key,punteggioFinale:this.dicesmanager.returnFinalScore(),isGameVictory:!1}))}}s(26);function et(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class st extends Phaser.Scene{constructor(){super("generalgamerules"),et(this,"rulesTitle","Rules of the game: "),et(this,"r0",null),et(this,"canvasWidth",null),et(this,"canvasHeight",null),et(this,"gameName",null),et(this,"gameToStart",null)}init(t){this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight,this.gameName=t.gameName,this.gameToStart=t.gameToStart,this.r0=t.r0}preload(){}create(){this.add.text(this.game.canvas.width/2,this.game.canvas.height/8,this.rulesTitle,{fontSize:"40px",color:"#f40707",fontStyle:"bold",fontFamily:"verdana"}).setOrigin(.5,.5),this.add.text(this.game.canvas.width/2,this.game.canvas.height/1.5,this.r0,{fontSize:"20px",color:"#f5f5ef",fontStyle:"bold",fontFamily:"verdana"}).setOrigin(.5,.5),this.add.text(this.game.canvas.width/2,this.game.canvas.height/1.1,"Click here to continue",{fontSize:"30px",color:"#ef0b0b",fontStyle:"bold",fontFamily:"verdana"}).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.scene.stop("pigsrules"),this.scene.start(this.gameToStart,{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,gameName:this.gameName})})}update(t,e){super.update(t,e)}}const it={type:a.a.AUTO,width:1e3,height:600,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[l,n,Y,c,v,_,B,U,tt,st],plugins:{scene:[{key:"rexUI",plugin:p.a,mapping:"rexUI"}]}};new a.a.Game(it).scene.start("startmenu",{canvasWidth:it.width,canvasHeight:it.height})}});